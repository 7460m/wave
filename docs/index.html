<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, minimum-scale=1" />
<meta name="generator" content="pdoc 0.8.4" />
<title>h2o_q API documentation</title>
<meta name="description" content="Python package `h2o_q` provides the Python driver for H2O Q â€¦" />
<link rel="preload stylesheet" as="style" href="https://cdnjs.cloudflare.com/ajax/libs/10up-sanitize.css/11.0.1/sanitize.min.css" integrity="sha256-PK9q560IAAa6WVRRh76LtCaI8pjTJ2z11v0miyNNjrs=" crossorigin>
<link rel="preload stylesheet" as="style" href="https://cdnjs.cloudflare.com/ajax/libs/10up-sanitize.css/11.0.1/typography.min.css" integrity="sha256-7l/o7C8jubJiy74VsKTidCy1yBkRtiUGbVkYBylBqUg=" crossorigin>
<link rel="stylesheet preload" as="style" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.18.1/styles/github.min.css" crossorigin>
<style>:root{--highlight-color:#fe9}.flex{display:flex !important}body{line-height:1.5em}#content{padding:20px}#sidebar{padding:30px;overflow:hidden}#sidebar > *:last-child{margin-bottom:2cm}.http-server-breadcrumbs{font-size:130%;margin:0 0 15px 0}#footer{font-size:.75em;padding:5px 30px;border-top:1px solid #ddd;text-align:right}#footer p{margin:0 0 0 1em;display:inline-block}#footer p:last-child{margin-right:30px}h1,h2,h3,h4,h5{font-weight:300}h1{font-size:2.5em;line-height:1.1em}h2{font-size:1.75em;margin:1em 0 .50em 0}h3{font-size:1.4em;margin:25px 0 10px 0}h4{margin:0;font-size:105%}h1:target,h2:target,h3:target,h4:target,h5:target,h6:target{background:var(--highlight-color);padding:.2em 0}a{color:#058;text-decoration:none;transition:color .3s ease-in-out}a:hover{color:#e82}.title code{font-weight:bold}h2[id^="header-"]{margin-top:2em}.ident{color:#900}pre code{background:#f8f8f8;font-size:.8em;line-height:1.4em}code{background:#f2f2f1;padding:1px 4px;overflow-wrap:break-word}h1 code{background:transparent}pre{background:#f8f8f8;border:0;border-top:1px solid #ccc;border-bottom:1px solid #ccc;margin:1em 0;padding:1ex}#http-server-module-list{display:flex;flex-flow:column}#http-server-module-list div{display:flex}#http-server-module-list dt{min-width:10%}#http-server-module-list p{margin-top:0}.toc ul,#index{list-style-type:none;margin:0;padding:0}#index code{background:transparent}#index h3{border-bottom:1px solid #ddd}#index ul{padding:0}#index h4{margin-top:.6em;font-weight:bold}@media (min-width:200ex){#index .two-column{column-count:2}}@media (min-width:300ex){#index .two-column{column-count:3}}dl{margin-bottom:2em}dl dl:last-child{margin-bottom:4em}dd{margin:0 0 1em 3em}#header-classes + dl > dd{margin-bottom:3em}dd dd{margin-left:2em}dd p{margin:10px 0}.name{background:#eee;font-weight:bold;font-size:.85em;padding:5px 10px;display:inline-block;min-width:40%}.name:hover{background:#e0e0e0}dt:target .name{background:var(--highlight-color)}.name > span:first-child{white-space:nowrap}.name.class > span:nth-child(2){margin-left:.4em}.inherited{color:#999;border-left:5px solid #eee;padding-left:1em}.inheritance em{font-style:normal;font-weight:bold}.desc h2{font-weight:400;font-size:1.25em}.desc h3{font-size:1em}.desc dt code{background:inherit}.source summary,.git-link-div{color:#666;text-align:right;font-weight:400;font-size:.8em;text-transform:uppercase}.source summary > *{white-space:nowrap;cursor:pointer}.git-link{color:inherit;margin-left:1em}.source pre{max-height:500px;overflow:auto;margin:0}.source pre code{font-size:12px;overflow:visible}.hlist{list-style:none}.hlist li{display:inline}.hlist li:after{content:',\2002'}.hlist li:last-child:after{content:none}.hlist .hlist{display:inline;padding-left:1em}img{max-width:100%}td{padding:0 .5em}.admonition{padding:.1em .5em;margin-bottom:1em}.admonition-title{font-weight:bold}.admonition.note,.admonition.info,.admonition.important{background:#aef}.admonition.todo,.admonition.versionadded,.admonition.tip,.admonition.hint{background:#dfd}.admonition.warning,.admonition.versionchanged,.admonition.deprecated{background:#fd4}.admonition.error,.admonition.danger,.admonition.caution{background:lightpink}</style>
<style media="screen and (min-width: 700px)">@media screen and (min-width:700px){#sidebar{width:30%;height:100vh;overflow:auto;position:sticky;top:0}#content{width:70%;max-width:100ch;padding:3em 4em;border-left:1px solid #ddd}pre code{font-size:1em}.item .name{font-size:1em}main{display:flex;flex-direction:row-reverse;justify-content:flex-end}.toc ul ul,#index ul{padding-left:1.5em}.toc > ul > li{margin-top:.5em}}</style>
<style media="print">@media print{#sidebar h1{page-break-before:always}.source{display:none}}@media print{*{background:transparent !important;color:#000 !important;box-shadow:none !important;text-shadow:none !important}a[href]:after{content:" (" attr(href) ")";font-size:90%}a[href][title]:after{content:none}abbr[title]:after{content:" (" attr(title) ")"}.ir a:after,a[href^="javascript:"]:after,a[href^="#"]:after{content:""}pre,blockquote{border:1px solid #999;page-break-inside:avoid}thead{display:table-header-group}tr,img{page-break-inside:avoid}img{max-width:100% !important}@page{margin:0.5cm}p,h2,h3{orphans:3;widows:3}h1,h2,h3,h4,h5,h6{page-break-after:avoid}}</style>
<script defer src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.18.1/highlight.min.js" integrity="sha256-eOgo0OtLL4cdq7RdwRUiGKLX9XsIJ7nGhWEKbohmVAQ=" crossorigin></script>
<script>window.addEventListener('DOMContentLoaded', () => hljs.initHighlighting())</script>
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap" rel="stylesheet">
<link href="https://fonts.googleapis.com/css2?family=Inconsolata:wght@400;700&display=swap" rel="stylesheet">
<link href="https://rsms.me/inter/inter-ui.css" rel="stylesheet">
<style>
body {
font-family: 'Inter', sans-serif;
font-size: 1rem;
color: #000;
-webkit-font-smoothing: antialiased;
line-height: 1.666666;
}
img {
max-width: 100%;
}
h1, h2, h3, h4, h5, h6, b, strong {
font-weight: 600;
}
h1, h2, h3, h4, h5, h6 {
font-size: 1rem;
line-height: 1.5;
}
h1 {
margin: 3rem 0 2rem 0;
border-top: 1px solid #000;
}
a {
text-decoration: none;
color: inherit;
border-color: #000;
border-bottom-style: solid;
border-bottom-width: 1px;
}
code {
font-family: 'Inconsolata', monospace;
}
pre {
border: none;
}
dd {
margin-left: 1em;
}
.http-server-breadcrumbs {
font-size: 100%;
}
#sidebar h1, #index h3, #index a, .toc a {
border: none;
}
.desc h2 {
font-size: 1rem;
font-weight: 600;
}
.name {
font-size:1em;
}
.hljs-comment {
font-style: normal;
}
.logo {
border: 10px solid #ffdf00;
height: 110px;
}
</style>
</head>
<body>
<main>
<article id="content">
<header>
<h1 class="title">Package <code>h2o_q</code></h1>
</header>
<section id="section-intro">
<p>Python package <code><a title="h2o_q" href="#h2o_q">h2o_q</a></code> provides the Python driver for H2O Q.</p>
<p>H2O Q is a lightweight software stack for programming interactive web applications
entirely in Python (no HTML/Javascript/CSS) required.</p>
<p>It is designed to make it fast, fun and easy to build low-latency, realtime,
collaborative, web-based applications. It ships batteries-included with
a suite of form and data visualization components for rapidly prototyping
analytical and decision-support applications.</p>
<p>Q's components work in conjunction with the Q relay server that facilitates
realtime state synchronization between Python and web browsers.</p>
<h1 id="change-log">Change Log</h1>
<ul>
<li><a href="https://github.com/h2oai/qd/releases/tag/v0.4.0">v0.4.0</a> - Sep 16, 2020<ul>
<li>Added<ul>
<li>Trigger attribute to checklist component.</li>
</ul>
</li>
<li>Changed<ul>
<li>Allow same min and max values for the range slider component.</li>
<li>App tests are now automatically and directly translated to Cypress tests when loaded.</li>
</ul>
</li>
<li>Fixed<ul>
<li>Allow removing selected options from the picker component.</li>
<li>Render axis title properly when specified.</li>
<li>Raise informative error message if attempting to use Numpy objects in components.</li>
</ul>
</li>
<li>Removed<ul>
<li>Cypress test bridge removed from server.</li>
<li><code>run_tests</code> API.</li>
</ul>
</li>
</ul>
</li>
<li><a href="https://github.com/h2oai/qd/releases/tag/v0.3.1">v0.3.1</a> - Sep 8, 2020<ul>
<li>Fixed<ul>
<li>Multiselect dropdown checkboxes do not respond when clicked.</li>
</ul>
</li>
</ul>
</li>
<li><a href="https://github.com/h2oai/qd/releases/tag/v0.3.0">v0.3.0</a> - Sep 8, 2020<ul>
<li>Added<ul>
<li>Native plots inside form cards - <code><a title="h2o_q.ui.visualization" href="ui.html#h2o_q.ui.visualization">visualization()</a></code>.</li>
<li>Vega plots inside form cards - <code><a title="h2o_q.ui.vega_visualization" href="ui.html#h2o_q.ui.vega_visualization">vega_visualization()</a></code>.</li>
</ul>
</li>
</ul>
</li>
<li><a href="https://github.com/h2oai/qd/releases/tag/v0.2.0">v0.2.0</a> - Sep 4, 2020<ul>
<li>Added<ul>
<li>Picker component.</li>
<li>Breadcrumbs component.</li>
<li>Range slider component.</li>
<li>Stepper component.</li>
<li>Allow backend to handle changes to textboxes as you type.</li>
<li>Select / deselect all controls for multivalued dropdown component.</li>
<li>Examples for using plotly plots.</li>
<li>Example for updating vega plots.</li>
<li>OS-specific installations instructions.</li>
<li>Cypress test framework support.</li>
</ul>
</li>
<li>Fixed<ul>
<li>Add .exe extension o Windows executable.</li>
<li>Percentage formatting in Safari.</li>
</ul>
</li>
</ul>
</li>
<li><a href="https://github.com/h2oai/qd/releases/tag/v0.1.4">v0.1.4</a> - Aug 10, 2020<ul>
<li>Fixed<ul>
<li>Frame heights are not respected with total height of frames exceeds containing card size</li>
</ul>
</li>
</ul>
</li>
<li><a href="https://github.com/h2oai/qd/releases/tag/v0.1.3">v0.1.3</a> - Aug 10, 2020<ul>
<li>Fixed<ul>
<li><code><a title="h2o_q.ui.link" href="ui.html#h2o_q.ui.link">link()</a></code> now has a <code>download</code> attribute to work around a <a href="https://bugzilla.mozilla.org/show_bug.cgi?id=858538">Firefox bug</a>.</li>
<li>Race condition in the interactive tour that caused some examples to not preview properly.</li>
</ul>
</li>
</ul>
</li>
<li><a href="https://github.com/h2oai/qd/releases/tag/v0.1.2">v0.1.2</a> - Aug 7, 2020<ul>
<li>Added<ul>
<li>API for <code><a title="h2o_q.core.Expando" href="core.html#h2o_q.core.Expando">Expando</a></code> copy, clone and item/attribute deletion.</li>
<li>Migration guide.</li>
<li>Example for setting browser window title.</li>
<li>API and example for Header card: <code><a title="h2o_q.ui.header_card" href="ui.html#h2o_q.ui.header_card">header_card()</a></code>.</li>
<li>Export <code><a title="h2o_q.core.Ref" href="core.html#h2o_q.core.Ref">Ref</a></code> from <code><a title="h2o_q" href="#h2o_q">h2o_q</a></code>.</li>
<li>API and examples for inline frames inside form cards: <code><a title="h2o_q.ui.frame" href="ui.html#h2o_q.ui.frame">frame()</a></code>.</li>
</ul>
</li>
<li>Changed<ul>
<li>Renamed env var prefix for settings to <code>H2O_Q_</code>.</li>
</ul>
</li>
<li>Fixed<ul>
<li>Plot X/Y axis transpose bug.</li>
</ul>
</li>
</ul>
</li>
<li><a href="https://github.com/h2oai/qd/releases/tag/v0.1.1">v0.1.1</a> - Jul 27, 2020<ul>
<li>Added<ul>
<li>Options for file type and size to file upload component.</li>
<li>API for displaying desktop notifications.</li>
<li>Buttons can now submit specific values instead of only True/False.</li>
<li>Examples for layout and card sizing.</li>
<li>Image card for displaying base64-encoded images.</li>
<li>Example for image card.</li>
<li>Vector graphics API.</li>
<li>Turtle graphics based path generator.</li>
<li>Examples for graphics card.</li>
</ul>
</li>
<li>Fixed<ul>
<li>Re-rendering performance improvements.</li>
</ul>
</li>
</ul>
</li>
<li><a href="https://github.com/h2oai/qd/releases/tag/v0.1.0">v0.1.0</a> - Jul 13, 2020<ul>
<li>Added<ul>
<li>Example for displaying iframe content &gt; 2MB.</li>
<li>Example for plotting using matplotlib.</li>
<li>Example for plotting using Altair.</li>
<li>Example for plotting using Vega.</li>
<li>Example for plotting using Bokeh.</li>
<li>Example for plotting using custom D3.js Javascript.</li>
<li>Example for live dashboard with stats cards.</li>
<li>Example for master-detail user interfaces using <code><a title="h2o_q.ui.table" href="ui.html#h2o_q.ui.table">table()</a></code>.</li>
<li>Example for authoring multi-step wizard user interfaces.</li>
<li>Unload API: <code>q.unload()</code> to delete uploaded files.</li>
</ul>
</li>
</ul>
</li>
<li><a href="https://github.com/h2oai/qd/releases/tag/v0.0.7">v0.0.7</a> - Jul 12, 2020<ul>
<li>Added<ul>
<li>Download API: <code>q.download()</code>.</li>
<li>Vega-lite support: <code><a title="h2o_q.ui.vega_card" href="ui.html#h2o_q.ui.vega_card">vega_card()</a></code>.</li>
<li>Context menu support to all cards.</li>
<li><code>refresh</code> attribute on <code>meta_card</code> allows static pages to stop receiving live updates.</li>
<li>Passing <code>-debug</code> when starting server displays site stats at <code>/_d/site</code>.</li>
<li>Drag and drop support for file upload component.</li>
<li>Template expression support for markdown cards.</li>
<li>All APIs and examples documented.</li>
<li>All 110 examples now ship with the Sphinx documentation.</li>
<li>Documentation now ships with release download.</li>
</ul>
</li>
<li>Changed<ul>
<li>API consistency: <code>ui.vis()</code> renamed to <code><a title="h2o_q.ui.plot" href="ui.html#h2o_q.ui.plot">plot()</a></code>.</li>
<li>All stats cards now have descriptive names.</li>
<li>API consistency: <code>ui.mark.mark</code> renamed to <code>ui.mark.type</code>.</li>
<li>API consistency: <code>page.sync()</code> and <code>page.push()</code> renamed to <code>page.save()</code>.</li>
</ul>
</li>
<li>Removed<ul>
<li><code>ui.dashboard_card()</code> and <code>ui.notebook_card()</code>.</li>
</ul>
</li>
</ul>
</li>
<li><a href="https://github.com/h2oai/qd/releases/tag/v0.0.6">v0.0.6</a> - Jul 6, 2020<ul>
<li>Added<ul>
<li>Log network traffic when logging is set to debug mode.</li>
<li>Capture and display unhandled exceptions on the UI.</li>
<li>Routing using location hash.</li>
<li>Toolbar component.</li>
<li>Tabs component.</li>
<li>Nav component.</li>
<li>Upload API: <code>q.upload()</code>.</li>
</ul>
</li>
<li>Changed<ul>
<li><code>q.session</code> renamed to <code>q.user</code></li>
</ul>
</li>
</ul>
</li>
<li><a href="https://github.com/h2oai/qd/releases/tag/v0.0.5">v0.0.5</a> - Jun 29, 2020<ul>
<li>Added<ul>
<li>Add configure() API to configure environment before launching.</li>
</ul>
</li>
</ul>
</li>
<li><a href="https://github.com/h2oai/qd/releases/tag/v0.0.4">v0.0.4</a> - Jun 26, 2020<ul>
<li>Added<ul>
<li>Multi-user and multi-client support: launch apps in <code>multicast</code> or <code>unicast</code> modes in addition to <code>broadcast</code> mode.</li>
<li>Client-specific data can now be stored and accessed via <code>q.client</code>, similar to <code>q.session</code> and <code>q.app</code>.</li>
<li>Simpler page referencing: <code>import site</code> can be used instead of <code>site = Site()</code>.</li>
</ul>
</li>
<li>Changed<ul>
<li>Apps now lauch in <code>unicast</code> mode by default instead of <code>broadcast</code> mode.</li>
</ul>
</li>
</ul>
</li>
<li><a href="https://github.com/h2oai/qd/releases/tag/v0.0.3">v0.0.3</a> - Jun 19, 2020<ul>
<li>Added<ul>
<li>Make <code>Expando</code> data structure available for apps.</li>
</ul>
</li>
</ul>
</li>
<li><a href="https://github.com/h2oai/qd/releases/tag/v0.0.2">v0.0.2</a> - Jun 17, 2020<ul>
<li>Initial version</li>
</ul>
</li>
<li>v0.0.1<ul>
<li>Package stub</li>
</ul>
</li>
</ul>
<h1 id="migration-guide">Migration Guide</h1>
<p>Before you begin, it is highly recommended that you <a href="https://github.com/h2oai/qd/releases">download</a> a release and run the interactive <code>tour.py</code> that ships with the release to get a feel for what Q programs look like in practice.</p>
<h2 id="what-has-changed">What has changed?</h2>
<p>From an app-development perspective, the most important change is that Q is more of a library rather than a framework.</p>
<p>With the previous framework, the only way to execute an app was via the Q server. This limitation has been removed. The script/app you author is just a regular Python program in which you <code>import <a title="h2o_q" href="#h2o_q">h2o_q</a></code> and execute via:</p>
<ol>
<li>The command line: <code>python3 my_script.py</code>.</li>
<li>In the Python REPL.</li>
<li>In a Jupyter notebook.</li>
<li>In your favorite IDE (PyCharm, VSCode, etc.).</li>
</ol>
<p>This also means that you can apply breakpoints and debug or step-through your program in your debugger of choice.</p>
<p>From an information architecture perspective, control has been inverted: instead of your app being an extension to Q's data/prep/search features, Q's features are now optional additions to your app, and your app takes center stage. Implementation-wise, instead of your app running in a sidebar inside of Q's UI, your app now occupies the entire UI.</p>
<h2 id="breaking-changes">Breaking changes</h2>
<p><strong>Removed: <code>@Q.app</code>, <code>@Q.ui</code> annotations.</strong></p>
<p>Instead, define a <code>async</code> request-handling function, say <code>main()</code>, and pass that function to <code>listen()</code>, like this:</p>
<pre><code class="py">from h2o_q import Q, listen

async def main(q: Q):
  pass

listen('/my/app/route', main)
</code></pre>
<p><strong>Removed: <code>q.wait()</code>, <code>q.show()</code>, <code>q.fail()</code>, <code>q.exit()</code>.</strong></p>
<p>The above four methods were the primary mechanism to make changes to your app's UI. They have all been replaced with a single <code><a title="h2o_q.core.Page.save" href="core.html#h2o_q.core.Page.save">Page.save()</a></code> method.</p>
<p>The new technique is:
1. Access the page or card you want to modify.
1. Modify the page or card.
1. Call <code><a title="h2o_q.core.Page.save" href="core.html#h2o_q.core.Page.save">Page.save()</a></code> to save your changes and update the browser page.</p>
<p>Before:</p>
<pre><code class="py">q.wait(
  callback_function,
  ui.text('Step 1'),
  ui.button(name='next', label='Next'),
)
</code></pre>
<p>After:</p>
<pre><code class="py">q.page['my_card'] = ui.form_card(
  # A card with its top-left corner at column 1, row 5; 2 columns wide and 4 rows high.
  box='1 5 2 4',
  items=[
    ui.text('Step 1'),
    ui.button(name='next', label='Next'),
  ],
)
await q.page.save()
</code></pre>
<p>Note that the <em>After</em> example requires a <code>box</code> that specifies where to draw your form. This is because you are not limited to using a sidebar, and can use the entire width/length of the page.</p>
<p>The same technique can be used to update the UI again (or display intermediate results):</p>
<p>Before:</p>
<pre><code class="py">q.wait(
  callback_function,
  ui.text('Step 2'),
  ui.button(name='next', label='Next'),
)
</code></pre>
<p>After:</p>
<pre><code class="py"># Don't have to recreate the entire form again; simply replace its items and save the page.
q.page['my_card'].items = [
  ui.text('Step 2'),
  ui.button(name='next', label='Next'),
]
await q.page.save()
</code></pre>
<p><strong>Removed: callback functions for request-handling.</strong></p>
<p>Q apps are 100% push-based, using duplex communication instead of a request/reply paradigm. There is no need to have a tangled mess of callbacks to handle UI events.</p>
<p>Instead, all requests are routed to a single function, and you can decide how to organize your application logic by branching on <code>q.args.*</code>.</p>
<p>Before:</p>
<pre><code class="py">def step1(q: Q):
  q.wait(
    step2,
    ui.text('Step 1'),
    ui.button(name='next', label='Next'),
  )

def step2(q: Q):
  q.wait(
    step3,
    ui.text('Step 2'),
    ui.button(name='next', label='Next'),
  )

def step3(q: Q):
  q.wait(
    step4,
    ui.text('Step 3'),
    ui.button(name='next', label='Next'),
  )
</code></pre>
<p>After:</p>
<pre><code class="py">async def main(q: Q):
  if q.args.step2:
    items = [
      ui.text('Step 2'),
      ui.button(name='step3', label='Next'),
    ]
  elif q.args.step3:
    items = [
      ui.text('Step 3'),
      ui.button(name='step4', label='Next'),
    ]
  else:
    items = [
      ui.text('Step 1'),
      ui.button(name='step2', label='Next'),
    ]

  q.page['my_card'].items = items
  await q.page.save()

listen('/my/app/route', main)
</code></pre>
<p><strong>Removed: <code>q.dashboard()</code> and <code>q.notebook()</code>.</strong></p>
<p>Every page in Q is a dashboard page. Instead of creating a separate dashboard or notebook, simply add cards to a page and arrange it the way you want. Cards can be created by using one of the several <code>ui.*_card()</code> APIs. Also see the <a href="#dashboard">dashboard</a>, <a href="#layout-position">layout</a> and <a href="#layout-size">sizing</a> examples to learn how to lay out several cards on a page.</p>
<p>If you want to display a notebook-style vertical stack of markdown, html or other content, use <code><a title="h2o_q.ui.text" href="ui.html#h2o_q.ui.text">text()</a></code> and <code><a title="h2o_q.ui.frame" href="ui.html#h2o_q.ui.frame">frame()</a></code> contained inside a <code><a title="h2o_q.ui.form_card" href="ui.html#h2o_q.ui.form_card">form_card()</a></code>, like this:</p>
<p>Before:</p>
<pre><code>ui.notebook([ui.notebook_section([
  ui.markdown_cell(content='Foo'),
  ui.frame_cell(source=html_foo, height='200px'),
  ui.markdown_cell(content='Bar'),
  ui.frame_cell(source=html_bar, height='200px'),
])])

</code></pre>
<p>After: Note the parameter name change <code>frame_cell(source=...)</code> to <code>frame(content=...)</code>.</p>
<pre><code>ui.form_cell(
  box='1 5 2 4',
  items=[
    ui.text(content='Foo'),
    ui.frame(content=html_foo, height='200px'),
    ui.text(content='Bar'),
    ui.frame(content=html_bar, height='200px'),
  ],
)
</code></pre>
<p><strong>Changed: <code><a title="h2o_q.ui.buttons" href="ui.html#h2o_q.ui.buttons">buttons()</a></code>, <code><a title="h2o_q.ui.expander" href="ui.html#h2o_q.ui.expander">expander()</a></code> and <code><a title="h2o_q.ui.tabs" href="ui.html#h2o_q.ui.tabs">tabs()</a></code> accept a <code>list</code> of items instead of var args <code>*args</code>.</strong></p>
<p>Before:</p>
<pre><code class="py">ui.buttons(ui.button(...), ui.button(...), ui.button(...))
</code></pre>
<p>After:</p>
<pre><code class="py">ui.buttons([ui.button(...), ui.button(...), ui.button(...)]) # Note enclosing [ ]
</code></pre>
<p><strong>Changed: <code>q.upload()</code> changed to <code>q.site.upload()</code>.</strong></p>
<p>The <code>upload()</code> method has been moved to the <code><a title="h2o_q.core.Site" href="core.html#h2o_q.core.Site">Site</a></code> instance, since each <code><a title="h2o_q.core.Site" href="core.html#h2o_q.core.Site">Site</a></code> represents a distinct server, and makes it possible to control multiple sites from a single Python script.</p>
<p><strong>Changed: <code>q.args.foo=</code> changed to <code>q.client.foo=</code>.</strong></p>
<p>Setting attributes on <code>q.args</code> (e.g. <code>q.args.foo = 'bar'</code>) is no longer preserved between requests. This was the primary mechanism employed previously to preserve data between requests.</p>
<p>Instead, Q provides 4 mechanisms for preserving data between requests:</p>
<ol>
<li><strong>Process-level</strong>: Use global variables.</li>
<li><strong>App-level</strong>: Use <code>q.app.foo = 'bar'</code> to save; access <code>q.app.foo</code> to read it back again.</li>
<li><strong>User-level</strong>: Use <code>q.user.foo = 'bar'</code> to save; access <code>q.user.foo</code> to read it back again.</li>
<li><strong>Client-level</strong>: Use <code>q.client.foo = 'bar'</code> to save; access <code>q.client.foo</code> to read it back again.</li>
</ol>
<p>Here, <em>Client</em> refers to a distinct tab in a browser.</p>
<p>If you want to rely on the old behavior of preserving <code>q.args</code> for the lifetime of the application, copy <code>q.args</code> to <code>q.client</code> like this:</p>
<pre><code class="python">from h2o_q import copy_expando

copy_expando(q.args, q.client, exclude_keys=['back2', 'select_target', 'restart'])
</code></pre>
<p><strong>Changed: No need to JSON-serialize values to preserve them between requests.</strong></p>
<p><code>q.args.foo=</code> only supported JSON-serialized values. No such restrictions exist for the <code>q.app</code>, <code>q.user</code> and <code>q.client</code> containers. You could, for example, load a Pandas dataframe and set <code>q.user.df = my_df</code>, and the dataframe will be accessible across requests for the lifetime of the app.</p>
<h1 id="authoring-functional-tests">Authoring functional tests</h1>
<p>Q supports authoring functional tests in Python for the <a href="https://www.cypress.io/">Cypress</a> test framework. This feature lets you automate browser-based point-and-click tests for your app.</p>
<h2 id="prerequisites">Prerequisites</h2>
<h3 id="step-1-install-nodejs">Step 1: Install Node.js</h3>
<p>Install a recent version of <a href="https://nodejs.org/en/">Node.js</a>.</p>
<h3 id="step-2-set-up-cypress">Step 2: Set up Cypress</h3>
<p>Using your terminal, go to your Q installation's <code><a title="h2o_q.test" href="test.html">h2o_q.test</a></code> directory and install Cypress</p>
<pre><code>$ cd path/to/q
$ cd test
$ npm install
</code></pre>
<h2 id="writing-a-test">Writing a test</h2>
<p>See the <a href="#wizard">Wizard</a> example to understand how to author tests for your interactive app. Specifically, note how the <code>@cypress</code> attribute is used. Refer to the <a href="https://docs.cypress.io/api/api/table-of-contents.html">Cypress API</a> to learn how to author assertions.</p>
<pre><code class="py">from h2o_q import cypress

@cypress('Walk through the wizard')
def test_wizard(cy):
    cy.visit('/demo')
    cy.locate('step1').click()
    cy.locate('text').should('have.text', 'What is your name?')
    cy.locate('nickname').clear().type('Fred')
    cy.locate('step2').click()
    cy.locate('text').should('have.text', 'Hi Fred! How do you feel right now?')
    cy.locate('feeling').clear().type('quirky')
    cy.locate('step3').click()
    cy.locate('text').should('have.text', 'What a coincidence, Fred! I feel quirky too!')

</code></pre>
<h2 id="running-your-test">Running your test</h2>
<h3 id="step-1-start-the-cypress-test-runner">Step 1: Start the Cypress test runner</h3>
<pre><code>$ cd path/to/q
$ cd test
$ ./node_modules/.bin/cypress open
</code></pre>
<h3 id="step-2-start-the-q-server-as-usual">Step 2: Start the Q server as usual</h3>
<pre><code>$ ./qd
</code></pre>
<h3 id="step-3-translate-your-python-tests-to-javascript">Step 3: Translate your Python tests to Javascript</h3>
<p>To translate your Python tests to Javascript, execute the Python module or file containing your tests like this:</p>
<pre><code>$ CYPRESS_INTEGRATION_TEST_DIR=path/to/q/test/cypress/integration ./venv/bin/python examples/wizard.py
</code></pre>
<p>The <code>CYPRESS_INTEGRATION_TEST_DIR</code> environment variable indicates where the Q SDK should write translated files to. This must be set to the <code>cypress/integration</code> directory.</p>
<p>Alternatively, you can set the <code>CYPRESS_INTEGRATION_TEST_DIR</code> environment variable in your shell (or IDE) to simplify running your test file:</p>
<pre><code>$ export CYPRESS_INTEGRATION_TEST_DIR=path/to/q/test/cypress/integration
$ ./venv/bin/python examples/wizard.py
</code></pre>
<h3 id="step-4-run-your-tests">Step 4: Run your tests</h3>
<p>At this point, you should find all your tests displayed in the Cypress UI. Simply click on a test to run it. Happy testing!</p>
<h1 id="examples">Examples</h1>
<h2 id="hello-world">Hello World!</h2>
<p>A simple example to get you started with Q.</p>
<pre><code class="py"># Import `Site` and the `ui` module from the `h2o_q` package
from h2o_q import site, ui

# Get the web page at route '/demo'.
# If you're running this example on your local machine,
# this page will refer to http://localhost:55555/demo.
page = site['/demo']

# Add a Markdown card named `hello` to the page.
page['hello'] = ui.markdown_card(
    box='1 1 2 2',
    title='Hello World!',
    content='And now for something completely different!',
)

# Finally, sync the page to send our changes to the server.
page.save()
</code></pre>
<h2 id="to-do-list-app">To-do List App</h2>
<p>A simple multi-user To-do list application.</p>
<pre><code class="py">from h2o_q import Q, listen, ui
from typing import List

_id = 0


# A simple class that represents a to-do item.
class TodoItem:
    def __init__(self, text):
        global _id
        _id += 1
        self.id = f'todo_{_id}'
        self.done = False
        self.text = text


async def main(q: Q):
    if q.args.new_todo:  # Display an input form.
        await new_todo(q)
    elif q.args.add_todo:  # Add an item.
        await add_todo(q)
    else:  # Show all items.
        await show_todos(q)


async def show_todos(q: Q):
    # Get items for this user.
    todos: List[TodoItem] = q.user.todos

    # Create a sample list if we don't have any.
    if todos is None:
        q.user.todos = todos = [TodoItem('Do this'), TodoItem('Do that'), TodoItem('Do something else')]

    # If the user checked/unchecked an item, update our list.
    for todo in todos:
        if todo.id in q.args:
            todo.done = q.args[todo.id]

    # Create done/not-done checkboxes.
    done = [ui.checkbox(name=todo.id, label=todo.text, value=True, trigger=True) for todo in todos if todo.done]
    not_done = [ui.checkbox(name=todo.id, label=todo.text, trigger=True) for todo in todos if not todo.done]

    # Display list
    q.page['form'] = ui.form_card(box='1 1 4 10', items=[
        ui.text_l('To Do'),
        ui.button(name='new_todo', label='Add To Do...', primary=True),
        *not_done,
        *([ui.separator('Done')] if len(done) else []),
        *done,
    ])
    await q.page.save()


async def add_todo(q: Q):
    # Insert a new item
    q.user.todos.insert(0, TodoItem(q.args.text or 'Untitled'))

    # Go back to our list.
    await show_todos(q)


async def new_todo(q: Q):
    # Display an input form
    q.page['form'] = ui.form_card(box='1 1 4 10', items=[
        ui.text_l('Add To Do'),
        ui.textbox(name='text', label='What needs to be done?', multiline=True),
        ui.buttons([
            ui.button(name='add_todo', label='Add', primary=True),
            ui.button(name='show_todos', label='Back'),
        ]),
    ])
    await q.page.save()


if __name__ == '__main__':
    listen('/demo', main)
</code></pre>
<h2 id="breadcrumbs">Breadcrumbs</h2>
<p>Breadcrumbs should be used as a navigational aid in your app or site.
They indicate the current pageâ€™s location within a hierarchy and help
the user understand where they are in relation to the rest of that hierarchy.
They also afford one-click access to higher levels of that hierarchy.
Breadcrumbs are typically placed, in horizontal form, under the masthead
or navigation of an experience, above the primary content area.</p>
<pre><code class="py">from h2o_q import site, ui

page = site['/demo']

page['breadcrumbs'] = ui.breadcrumbs_card(
    box='1 1 4 -1',
    items=[
        ui.breadcrumb(name='#menu1', label='Menu 1'),
        ui.breadcrumb(name='#menu2', label='Menu 2'),
        ui.breadcrumb(name='#menu3', label='Menu 3'),
    ],
)

page.save()
</code></pre>
<h2 id="wizard">Wizard</h2>
<p>Create a multi-step wizard using form cards.</p>
<pre><code class="py">from h2o_q import Q, ui, listen, cypress, Cypress


async def main(q: Q):
    if not q.client.initialized:  # First visit, create an empty form card for our wizard
        q.page['wizard'] = ui.form_card(box='1 1 2 4', items=[])
        q.client.initialized = True

    wizard = q.page['wizard']  # Get a reference to the wizard form
    if q.args.step1:
        wizard.items = [
            ui.text_xl('Wizard - Step 1'),
            ui.text(&quot;What is your name?&quot;),
            ui.textbox(name='nickname', label='My name is...', value='Gandalf'),
            ui.buttons([ui.button(name='step2', label='Next', primary=True)]),
        ]
    elif q.args.step2:
        q.client.nickname = q.args.nickname
        wizard.items = [
            ui.text_xl('Wizard - Step 2'),
            ui.text(f&quot;Hi {q.args.nickname}! How do you feel right now?&quot;),
            ui.textbox(name='feeling', label='I feel...', value='magical'),
            ui.buttons([ui.button(name='step3', label='Next', primary=True)]),
        ]
    elif q.args.step3:
        wizard.items = [
            ui.text_xl('Wizard - Done'),
            ui.text(f&quot;What a coincidence, {q.client.nickname}! I feel {q.args.feeling} too!&quot;),
            ui.buttons([ui.button(name='step1', label='Try Again', primary=True)]),
        ]
    else:
        wizard.items = [
            ui.text_xl('Wizard Example'),
            ui.text(&quot;Let's have a conversation, shall we?&quot;),
            ui.buttons([ui.button(name='step1', label='Of course!', primary=True)]),
        ]

    await q.page.save()


@cypress('Walk through the wizard')
def try_walk_through(cy: Cypress):
    cy.visit('/demo')
    cy.locate('step1').click()
    cy.locate('text').should('have.text', 'What is your name?')
    cy.locate('nickname').clear().type('Fred')
    cy.locate('step2').click()
    cy.locate('text').should('have.text', 'Hi Fred! How do you feel right now?')
    cy.locate('feeling').clear().type('quirky')
    cy.locate('step3').click()
    cy.locate('text').should('have.text', 'What a coincidence, Fred! I feel quirky too!')


listen('/demo', main)
</code></pre>
<h2 id="stepper">Stepper</h2>
<p>Use Stepper to show progress through numbered steps.</p>
<pre><code class="py">from h2o_q import Q, listen, ui


async def main(q: Q):
    q.page['basic-stepper'] = ui.form_card(
        box='1 1 4 1',
        items=[
          ui.stepper(name='basic-stepper', items=[
            ui.step(label='Step 1'),
            ui.step(label='Step 2'),
            ui.step(label='Step 3'),
          ])
        ]
    )
    q.page['icon-stepper'] = ui.form_card(
        box='1 2 4 1',
        items=[
          ui.stepper(name='icon-stepper', items=[
            ui.step(label='Step 1', icon='MailLowImportance'),
            ui.step(label='Step 2', icon='TaskManagerMirrored'),
            ui.step(label='Step 3', icon='Cafe'),
          ])
        ]
    )
    q.page['almost-done-stepper'] = ui.form_card(
        box='1 3 4 1',
        items=[
          ui.stepper(name='almost-done-stepper', items=[
            ui.step(label='Step 1', done=True),
            ui.step(label='Step 2', done=True),
            ui.step(label='Step 3'),
          ])
        ]
    )
    await q.page.save()


if __name__ == '__main__':
    listen('/demo', main)
</code></pre>
<h2 id="stat-small">Stat / Small</h2>
<p>Create a stat card displaying a single value.</p>
<pre><code class="py">import time

from faker import Faker

from synth import FakePercent
from h2o_q import site, ui

page = site['/demo']

fake = Faker()
f = FakePercent()
val, _ = f.next()
c = page.add('example', ui.small_stat_card(
    box=f'1 1 1 1',
    title=fake.cryptocurrency_name(),
    value=f'${val:.2f}',
))
page.save()

while True:
    time.sleep(1)
    val, _ = f.next()
    c.value = f'${val:.2f}'
    page.save()
</code></pre>
<h2 id="stat-large">Stat / Large</h2>
<p>Create a stat card displaying a primary value, an auxiliary value and a caption.</p>
<pre><code class="py">import time

from faker import Faker

from synth import FakePercent
from h2o_q import site, ui

page = site['/demo']

fake = Faker()
f = FakePercent()
val, pc = f.next()
c = page.add(f'example', ui.large_stat_card(
    box='1 1 2 2',
    title=fake.cryptocurrency_name(),
    value='=${{intl qux minimum_fraction_digits=2 maximum_fraction_digits=2}}',
    aux_value='={{intl quux style=&quot;percent&quot; minimum_fraction_digits=1 maximum_fraction_digits=1}}',
    data=dict(qux=val, quux=pc),
    caption=' '.join(fake.sentences()),
))
page.save()

while True:
    time.sleep(1)
    val, pc = f.next()
    c.data.qux = val
    c.data.quux = pc
    page.save()
</code></pre>
<h2 id="stat-gauge-wide">Stat / Gauge / Wide</h2>
<p>Create a wide stat card displaying a primary value, an auxiliary value and a progress gauge.</p>
<pre><code class="py">import time

from faker import Faker

from synth import FakePercent
from h2o_q import site, ui

page = site['/demo']

fake = Faker()
f = FakePercent()
val, pc = f.next()
c = page.add(f'example', ui.wide_gauge_stat_card(
    box='1 1 2 1',
    title=fake.cryptocurrency_name(),
    value='=${{intl foo minimum_fraction_digits=2 maximum_fraction_digits=2}}',
    aux_value='={{intl bar style=&quot;percent&quot; minimum_fraction_digits=2 maximum_fraction_digits=2}}',
    plot_color='$red',
    progress=pc,
    data=dict(foo=val, bar=pc),
))
page.save()

while True:
    time.sleep(1)
    val, pc = f.next()
    c.data.foo = val
    c.data.bar = pc
    c.progress = pc
    page.save()
</code></pre>
<h2 id="stat-gauge-tall">Stat / Gauge / Tall</h2>
<p>Create a tall stat card displaying a primary value, an auxiliary value and a progress gauge.</p>
<pre><code class="py">import time

from faker import Faker

from synth import FakePercent
from h2o_q import site, ui

page = site['/demo']

fake = Faker()
f = FakePercent()
val, pc = f.next()
c = page.add(f'example', ui.tall_gauge_stat_card(
    box='1 1 1 2',
    title=fake.cryptocurrency_name(),
    value='=${{intl foo minimum_fraction_digits=2 maximum_fraction_digits=2}}',
    aux_value='={{intl bar style=&quot;percent&quot; minimum_fraction_digits=2 maximum_fraction_digits=2}}',
    plot_color='$red',
    progress=pc,
    data=dict(foo=val, bar=pc),
))
page.save()

while True:
    time.sleep(1)
    val, pc = f.next()
    c.data.foo = val
    c.data.bar = pc
    c.progress = pc
    page.save()
</code></pre>
<h2 id="stat-bar-wide">Stat / Bar / Wide</h2>
<p>Create a wide stat card displaying a primary value, an auxiliary value and a progress bar.</p>
<pre><code class="py">import time

from faker import Faker

from synth import FakePercent
from h2o_q import site, ui

page = site['/demo']

fake = Faker()
f = FakePercent()
val, pc = f.next()
c = page.add(f'example', ui.wide_bar_stat_card(
    box='1 1 2 1',
    title=fake.cryptocurrency_name(),
    value='=${{intl foo minimum_fraction_digits=2 maximum_fraction_digits=2}}',
    aux_value='={{intl bar style=&quot;percent&quot; minimum_fraction_digits=2 maximum_fraction_digits=2}}',
    plot_color='$red',
    progress=pc,
    data=dict(foo=val, bar=pc),
))
page.save()

while True:
    time.sleep(1)
    val, pc = f.next()
    c.data.foo = val
    c.data.bar = pc
    c.progress = pc
    page.save()
</code></pre>
<h2 id="stat-bar-large">Stat / Bar / Large</h2>
<p>Create a large captioned card displaying a primary value, an auxiliary value and a progress bar, with captions for each value.</p>
<pre><code class="py">import time

from faker import Faker

from synth import FakePercent
from h2o_q import site, ui

page = site['/demo']

fake = Faker()
f = FakePercent()
val, pc = f.next()
c = page.add(f'example', ui.large_bar_stat_card(
    box='1 1 2 2',
    title=fake.cryptocurrency_name(),
    value='=${{intl foo minimum_fraction_digits=2 maximum_fraction_digits=2}}',
    value_caption='This Month',
    aux_value='={{intl bar style=&quot;percent&quot; minimum_fraction_digits=2 maximum_fraction_digits=2}}',
    aux_value_caption='Previous Month',
    plot_color='$red',
    progress=pc,
    data=dict(foo=val, bar=pc),
    caption=' '.join(fake.sentences(2)),
))
page.save()

while True:
    time.sleep(1)
    val, pc = f.next()
    c.data.foo = val
    c.data.bar = pc
    c.progress = pc
    page.save()
</code></pre>
<h2 id="stat-series-small-area">Stat / Series / Small / Area</h2>
<p>Create a small stat card displaying a primary value and a series plot.</p>
<pre><code class="py">import time

from faker import Faker

from synth import FakeCategoricalSeries
from h2o_q import site, ui, data

page = site['/demo']

colors = '$red $pink $blue $azure $cyan $teal $mint $green $lime $yellow $amber $orange $tangerine'.split()
curves = 'linear smooth step step-after step-before'.split()
fake = Faker()
cards = []
for i in range(len(curves)):
    f = FakeCategoricalSeries()
    cat, val, pc = f.next()
    c = page.add(f'example{i}', ui.small_series_stat_card(
        box=f'1 {i + 1} 1 1',
        title=fake.cryptocurrency_name(),
        value='=${{intl qux minimum_fraction_digits=2 maximum_fraction_digits=2}}',
        data=dict(qux=val, quux=pc),
        plot_category='foo',
        plot_type='area',
        plot_value='qux',
        plot_color=colors[i],
        plot_data=data('foo qux', -15),
        plot_zero_value=0,
        plot_curve=curves[i],
    ))
    cards.append((f, c))
page.save()

while True:
    time.sleep(1)
    for f, c in cards:
        cat, val, pc = f.next()
        c.data.qux = val
        c.data.quux = pc
        c.plot_data[-1] = [cat, val]
    page.save()
</code></pre>
<h2 id="stat-series-small-interval">Stat / Series / Small / Interval</h2>
<p>Create a small stat card displaying a primary value and a series plot.</p>
<pre><code class="py">import time

from faker import Faker

from synth import FakeCategoricalSeries
from h2o_q import site, ui, data

page = site['/demo']

fake = Faker()
f = FakeCategoricalSeries()
cat, val, pc = f.next()
c = page.add(f'example', ui.small_series_stat_card(
    box='1 1 1 1',
    title=fake.cryptocurrency_name(),
    value='=${{intl qux minimum_fraction_digits=2 maximum_fraction_digits=2}}',
    data=dict(qux=val, quux=pc),
    plot_category='foo',
    plot_type='interval',
    plot_value='qux',
    plot_color='$red',
    plot_data=data('foo qux', -20),
    plot_zero_value=0,
))
page.save()

while True:
    time.sleep(1)
    cat, val, pc = f.next()
    c.data.qux = val
    c.data.quux = pc
    c.plot_data[-1] = [cat, val]
    page.save()
</code></pre>
<h2 id="stat-series-wide-area">Stat / Series / Wide / Area</h2>
<p>Create a wide stat card displaying a primary value, an auxiliary value and a series plot.</p>
<pre><code class="py">import time

from faker import Faker

from synth import FakeCategoricalSeries
from h2o_q import site, ui, data

page = site['/demo']

colors = '$red $pink $blue $azure $cyan $teal $mint $green $lime $yellow $amber $orange $tangerine'.split()
curves = 'linear smooth step step-after step-before'.split()
fake = Faker()
cards = []
for i in range(len(curves)):
    f = FakeCategoricalSeries()
    cat, val, pc = f.next()
    c = page.add(f'example{i}', ui.wide_series_stat_card(
        box=f'1 {i + 1} 2 1',
        title=fake.cryptocurrency_name(),
        value='=${{intl qux minimum_fraction_digits=2 maximum_fraction_digits=2}}',
        aux_value='={{intl quux style=&quot;percent&quot; minimum_fraction_digits=1 maximum_fraction_digits=1}}',
        data=dict(qux=val, quux=pc / 100),
        plot_category='foo',
        plot_type='area',
        plot_value='qux',
        plot_color=colors[i],
        plot_data=data('foo qux', -15),
        plot_zero_value=0,
        plot_curve=curves[i],
    ))
    cards.append((f, c))
page.save()

while True:
    time.sleep(1)
    for f, c in cards:
        cat, val, pc = f.next()
        c.data.qux = val
        c.data.quux = pc / 100
        c.plot_data[-1] = [cat, val]
    page.save()
</code></pre>
<h2 id="stat-series-wide-interval">Stat / Series / Wide / Interval</h2>
<p>Create a wide stat card displaying a primary value, an auxiliary value and a series plot.</p>
<pre><code class="py">import time

from faker import Faker

from synth import FakeCategoricalSeries
from h2o_q import site, ui, data

page = site['/demo']

fake = Faker()
f = FakeCategoricalSeries()
cat, val, pc = f.next()
c = page.add(f'example', ui.wide_series_stat_card(
    box='1 1 2 1',
    title=fake.cryptocurrency_name(),
    value='=${{intl qux minimum_fraction_digits=2 maximum_fraction_digits=2}}',
    aux_value='={{intl quux style=&quot;percent&quot; minimum_fraction_digits=1 maximum_fraction_digits=1}}',
    data=dict(qux=val, quux=pc / 100),
    plot_category='foo',
    plot_type='interval',
    plot_value='qux',
    plot_color='$red',
    plot_data=data('foo qux', -15),
    plot_zero_value=0,
))
page.save()

while True:
    time.sleep(1)
    cat, val, pc = f.next()
    c.data.qux = val
    c.data.quux = pc / 100
    c.plot_data[-1] = [cat, val]
    page.save()
</code></pre>
<h2 id="stat-series-tall-area">Stat / Series / Tall / Area</h2>
<p>Create a tall stat card displaying a primary value, an auxiliary value and a series plot.</p>
<pre><code class="py">import time

from faker import Faker

from synth import FakeCategoricalSeries
from h2o_q import site, ui, data

page = site['/demo']

colors = '$red $pink $blue $azure $cyan $teal $mint $green $lime $yellow $amber $orange $tangerine'.split()
curves = 'linear smooth step step-after step-before'.split()
fake = Faker()
cards = []
for i in range(len(curves)):
    f = FakeCategoricalSeries()
    cat, val, pc = f.next()
    c = page.add(f'example{i}', ui.tall_series_stat_card(
        box=f'{i + 1} 1 1 2',
        title=fake.cryptocurrency_name(),
        value='=${{intl qux minimum_fraction_digits=2 maximum_fraction_digits=2}}',
        aux_value='={{intl quux style=&quot;percent&quot; minimum_fraction_digits=1 maximum_fraction_digits=1}}',
        data=dict(qux=val, quux=pc / 100),
        plot_type='area',
        plot_category='foo',
        plot_value='qux',
        plot_color=colors[i],
        plot_data=data('foo qux', -15),
        plot_zero_value=0,
        plot_curve=curves[i],
    ))
    cards.append((f, c))
page.save()

while True:
    time.sleep(1)
    for f, c in cards:
        cat, val, pc = f.next()
        c.data.qux = val
        c.data.quux = pc / 100
        c.plot_data[-1] = [cat, val]
    page.save()
</code></pre>
<h2 id="stat-series-tall-interval">Stat / Series / Tall / Interval</h2>
<p>Create a tall stat card displaying a primary value, an auxiliary value and a series plot.</p>
<pre><code class="py">import time

from faker import Faker

from synth import FakeCategoricalSeries
from h2o_q import site, ui, data

page = site['/demo']

fake = Faker()
f = FakeCategoricalSeries()
cat, val, pc = f.next()
c = page.add(f'example', ui.tall_series_stat_card(
    box='1 1 1 2',
    title=fake.cryptocurrency_name(),
    value='=${{intl qux minimum_fraction_digits=2 maximum_fraction_digits=2}}',
    aux_value='={{intl quux style=&quot;percent&quot; minimum_fraction_digits=1 maximum_fraction_digits=1}}',
    data=dict(qux=val, quux=pc / 100),
    plot_category='foo',
    plot_type='interval',
    plot_value='qux',
    plot_color='$red',
    plot_data=data('foo qux', -20),
    plot_zero_value=0,
))
page.save()

while True:
    time.sleep(1)
    cat, val, pc = f.next()
    c.data.qux = val
    c.data.quux = pc / 100
    c.plot_data[-1] = [cat, val]
    page.save()
</code></pre>
<h2 id="dashboard">Dashboard</h2>
<p>Make a dashboard using a multitude of cards and update them live.</p>
<pre><code class="py">from faker import Faker
import time
from h2o_q import site, data, ui
from synth import FakePercent, FakeCategoricalSeries

fake = Faker()

light_theme_colors = '$red $pink $purple $violet $indigo $blue $azure $cyan $teal $mint $green $amber $orange $tangerine'.split()
dark_theme_colors = '$red $pink $blue $azure $cyan $teal $mint $green $lime $yellow $amber $orange $tangerine'.split()

_color_index = -1
colors = dark_theme_colors


def next_color():
    global _color_index
    _color_index += 1
    return colors[_color_index % len(colors)]


_curve_index = -1
curves = 'linear smooth step stepAfter stepBefore'.split()


def next_curve():
    global _curve_index
    _curve_index += 1
    return curves[_curve_index % len(curves)]


def create_dashboard(update_freq=0.0):
    page = site['/demo']

    simples = []
    for i in range(1, 7):
        f = FakePercent()
        val, pc = f.next()
        c = page.add(f'a{i}', ui.small_stat_card(
            box=f'{i} 1 1 1',
            title=fake.cryptocurrency_name(),
            value=f'${val:.2f}',
        ))
        simples.append((f, c))

    simples_colored = []
    for i in range(1, 7):
        f = FakeCategoricalSeries()
        cat, val, pc = f.next()
        c = page.add(f'aa{i}', ui.small_series_stat_card(
            box=f'{6 + i} 1 1 1',
            title=fake.cryptocurrency_code(),
            value='=${{intl qux minimum_fraction_digits=2 maximum_fraction_digits=2}}',
            data=dict(qux=val, quux=pc / 100),
            plot_category='foo',
            plot_value='qux',
            plot_color=next_color(),
            plot_data=data('foo qux', -15),
            plot_zero_value=0,
            plot_curve=next_curve(),
        ))
        simples_colored.append((f, c))

    lines = []
    for i in range(1, 13, 2):
        f = FakeCategoricalSeries()
        cat, val, pc = f.next()
        c = page.add(f'b{i}', ui.wide_series_stat_card(
            box=f'{i} 2 2 1',
            title=fake.cryptocurrency_name(),
            value='=${{intl qux minimum_fraction_digits=2 maximum_fraction_digits=2}}',
            aux_value='={{intl quux style=&quot;percent&quot; minimum_fraction_digits=1 maximum_fraction_digits=1}}',
            data=dict(qux=val, quux=pc / 100),
            plot_category='foo',
            plot_value='qux',
            plot_color=next_color(),
            plot_data=data('foo qux', -15),
            plot_zero_value=0,
            plot_curve=next_curve(),
        ))
        lines.append((f, c))

    bars = []
    for i in range(1, 13, 2):
        f = FakeCategoricalSeries()
        cat, val, pc = f.next()
        c = page.add(f'c{i}', ui.wide_series_stat_card(
            box=f'{i} 3 2 1',
            title=fake.cryptocurrency_name(),
            value='=${{intl qux minimum_fraction_digits=2 maximum_fraction_digits=2}}',
            aux_value='={{intl quux style=&quot;percent&quot; minimum_fraction_digits=1 maximum_fraction_digits=1}}',
            data=dict(qux=val, quux=pc),
            plot_type='interval',
            plot_category='foo',
            plot_value='qux',
            plot_color=next_color(),
            plot_data=data('foo qux', -25),
            plot_zero_value=0
        ))
        bars.append((f, c))

    large_pcs = []
    for i in range(1, 13):
        f = FakePercent()
        val, pc = f.next()
        c = page.add(f'd{i}', ui.tall_gauge_stat_card(
            box=f'{i} 4 1 2',
            title=fake.cryptocurrency_name(),
            value='=${{intl foo minimum_fraction_digits=2 maximum_fraction_digits=2}}',
            aux_value='={{intl bar style=&quot;percent&quot; minimum_fraction_digits=2 maximum_fraction_digits=2}}',
            plot_color=next_color(),
            progress=pc,
            data=dict(foo=val, bar=pc / 100),
        ))
        large_pcs.append((f, c))

    large_lines = []
    for i in range(1, 13):
        f = FakeCategoricalSeries()
        cat, val, pc = f.next()
        c = page.add(f'e{i}', ui.tall_series_stat_card(
            box=f'{i} 6 1 2',
            title=fake.cryptocurrency_name(),
            value='=${{intl qux minimum_fraction_digits=2 maximum_fraction_digits=2}}',
            aux_value='={{intl quux style=&quot;percent&quot; minimum_fraction_digits=1 maximum_fraction_digits=1}}',
            data=dict(qux=val, quux=pc),
            plot_type='area',
            plot_category='foo',
            plot_value='qux',
            plot_color=next_color(),
            plot_data=data('foo qux', -15),
            plot_zero_value=0,
            plot_curve=next_curve(),
        ))
        large_lines.append((f, c))

    small_pcs = []
    for i in range(1, 7, 2):
        f = FakePercent()
        val, pc = f.next()
        c = page.add(f'f{i}', ui.wide_gauge_stat_card(
            box=f'{i} 8 2 1',
            title=fake.cryptocurrency_name(),
            value='=${{intl foo minimum_fraction_digits=2 maximum_fraction_digits=2}}',
            aux_value='={{intl bar style=&quot;percent&quot; minimum_fraction_digits=2 maximum_fraction_digits=2}}',
            plot_color=next_color(),
            progress=pc,
            data=dict(foo=val, bar=pc / 100),
        ))
        small_pcs.append((f, c))

    small_pbs = []
    for i in range(7, 13, 2):
        f = FakePercent()
        val, pc = f.next()
        c = page.add(f'f{i}', ui.wide_bar_stat_card(
            box=f'{i} 8 2 1',
            title=fake.cryptocurrency_name(),
            value='=${{intl foo minimum_fraction_digits=2 maximum_fraction_digits=2}}',
            aux_value='={{intl bar style=&quot;percent&quot; minimum_fraction_digits=2 maximum_fraction_digits=2}}',
            plot_color=next_color(),
            progress=pc,
            data=dict(foo=val, bar=pc / 100),
        ))
        small_pbs.append((f, c))

    large_cards = []
    for i in range(1, 7, 2):
        f = FakePercent()
        val, pc = f.next()
        c = page.add(f'g{i}', ui.large_stat_card(
            box=f'{i} 9 2 2',
            title=fake.cryptocurrency_name(),
            value='=${{intl qux minimum_fraction_digits=2 maximum_fraction_digits=2}}',
            aux_value='={{intl quux style=&quot;percent&quot; minimum_fraction_digits=1 maximum_fraction_digits=1}}',
            data=dict(qux=val, quux=pc / 100),
            caption=' '.join(fake.sentences()),
        ))
        large_cards.append((f, c))

    large_pbs = []
    for i in range(7, 13, 2):
        f = FakePercent()
        val, pc = f.next()
        c = page.add(f'g{i}', ui.large_bar_stat_card(
            box=f'{i} 9 2 2',
            title=fake.cryptocurrency_name(),
            value='=${{intl foo minimum_fraction_digits=2 maximum_fraction_digits=2}}',
            value_caption='This Month',
            aux_value='={{intl bar style=&quot;percent&quot; minimum_fraction_digits=2 maximum_fraction_digits=2}}',
            aux_value_caption='Previous Month',
            plot_color=next_color(),
            progress=pc,
            data=dict(foo=val, bar=pc / 100),
            caption=' '.join(fake.sentences(2)),
        ))
        large_pbs.append((f, c))

    page.save()

    while update_freq &gt; 0:
        time.sleep(update_freq)

        for f, c in simples:
            val, pc = f.next()
            c.value = f'${val:.2f}',

        for f, c in simples_colored:
            cat, val, pc = f.next()
            c.data.qux = val
            c.data.quux = pc / 100
            c.plot_data[-1] = [cat, val]

        for f, c in lines:
            cat, val, pc = f.next()
            c.data.qux = val
            c.data.quux = pc / 100
            c.plot_data[-1] = [cat, val]

        for f, c in bars:
            cat, val, pc = f.next()
            c.data.qux = val
            c.data.quux = pc / 100
            c.plot_data[-1] = [cat, val]

        for f, c in large_lines:
            cat, val, pc = f.next()
            c.data.qux = val
            c.data.quux = pc / 100
            c.plot_data[-1] = [cat, val]

        for f, c in large_pcs:
            val, pc = f.next()
            c.data.foo = val
            c.data.bar = pc
            c.progress = pc

        for f, c in small_pcs:
            val, pc = f.next()
            c.data.foo = val
            c.data.bar = pc
            c.progress = pc

        for f, c in small_pbs:
            val, pc = f.next()
            c.data.foo = val
            c.data.bar = pc
            c.progress = pc

        for f, c in large_cards:
            val, pc = f.next()
            c.data.qux = val
            c.data.quux = pc

        for f, c in large_pbs:
            val, pc = f.next()
            c.data.foo = val
            c.data.bar = pc
            c.progress = pc

        page.save()


create_dashboard(update_freq=0.25)
</code></pre>
<h2 id="layout-position">Layout / Position</h2>
<p>How to adjust the position of cards on a page.</p>
<pre><code class="py">from h2o_q import site, ui

# Every page has a grid system in place.
# The grid has 12 columns and 10 rows.
# A column is 134 pixels wide.
# A row is 76 pixels high.
# The gap between rows and columns is set to 15 pixels.

# Cards have a `box` attribute that specifies its column, row, width and height.
# box = 'column row width height'
# They indicate the 1-based column/row to position the top-left corner of the card.

# In this example, we place a 1x1 card in each column/row on a page
# to demonstrate their column/row values.

page = site['/demo']
columns = 12
rows = 10

for column in range(1, columns + 1):
    for row in range(1, rows + 1):
        box = f'{column} {row} 1 1'
        page[f'card_{column}_{row}'] = ui.markdown_card(box=box, title=box, content='')

page.save()
</code></pre>
<h2 id="layout-size">Layout / Size</h2>
<p>How to adjust the size of cards on a page.</p>
<pre><code class="py">from h2o_q import site, ui

# Every page has a grid system in place.
# The grid has 12 columns and 10 rows.
# A column is 134 pixels wide.
# A row is 76 pixels high.
# The gap between rows and columns is set to 15 pixels.

# Cards have a `box` attribute that specifies its column, row, width and height.
# box = 'column row width height'
# They indicate the 1-based column/row to position the top-left corner of the card.

# In this example, we place multiple cards on a page to demonstrate their `box` values.

page = site['/demo']
boxes = [
    '1 1 1 1',
    '2 1 2 1',
    '4 1 3 1',
    '7 1 4 1',
    '11 1 2 2',
    '1 2 1 9',
    '2 2 1 4',
    '3 2 1 2',
    '2 6 1 5',
    '3 4 1 7',
    '4 2 7 9',
    '11 9 2 2',
    '11 3 2 6',
]

for box in boxes:
    page[f'card_{box.replace(&quot; &quot;, &quot;_&quot;)}'] = ui.markdown_card(box=box, title=box, content='')

page.save()
</code></pre>
<h2 id="form-text">Form / Text</h2>
<p>Use markdown in a text component to display formatted content within a form.</p>
<pre><code class="py">from h2o_q import site, ui

page = site['/demo']

sample_markdown = '''
The **quick** _brown_ fox jumped over the lazy dog.

Block quote:

&gt; The quick brown fox jumped over the lazy dog.

Unordered list:

- The quick brown fox jumped over the lazy dog.
- The quick brown fox jumped over the lazy dog.
- The quick brown fox jumped over the lazy dog.

Ordered list:

1. The quick brown fox jumped over the lazy dog.
1. The quick brown fox jumped over the lazy dog.
1. The quick brown fox jumped over the lazy dog.

Image:

![Monty Python](https://upload.wikimedia.org/wikipedia/en/c/cb/Flyingcircus_2.jpg)

Table:

| Column 1 | Column 2 | Column 3 |
| -------- | -------- | -------- |
| Item 1   | Item 2   | Item 3   |
| Item 1   | Item 2   | Item 3   |
| Item 1   | Item 2   | Item 3   |
'''

page['example'] = ui.form_card(
    box='1 1 4 -1',
    items=[ui.text(sample_markdown)]
)
page.save()
</code></pre>
<h2 id="form-text-sizes">Form / Text / Sizes</h2>
<p>Use text size variants to display formatted text using predefined font sizes.</p>
<pre><code class="py">from h2o_q import site, ui

page = site['/demo']

page['example'] = ui.form_card(
    box='1 1 4 -1',
    items=[
        ui.separator('Separator'),
        ui.text_xl('Extra large text'),
        ui.text_l('Large text'),
        ui.text('Normal text'),
        ui.text_m('Medium text'),
        ui.text_s('Small text'),
        ui.text_xs('Extra small text'),

        # Using `ui.text()` with a `size` argument produces similar results:
        ui.separator('Separator'),
        ui.text('Extra large text', size='xl'),
        ui.text('Large text', size='l'),
        ui.text('Normal text'),
        ui.text('Medium text', size='m'),
        ui.text('Small text', size='s'),
        ui.text('Extra small text', size='xs'),
    ],
)
page.save()
</code></pre>
<h2 id="form-label">Form / Label</h2>
<p>Use labels to give a name to a component or a group of components in a form.</p>
<pre><code class="py">from h2o_q import site, ui

page = site['/demo']

page['example'] = ui.form_card(
    box='1 1 4 -1',
    items=[
        ui.label(label='Standard Label'),
        ui.label(label='Required Label', required=True),
        ui.label(label='Disabled Label', disabled=True),
    ]
)
page.save()
</code></pre>
<h2 id="form-link">Form / Link</h2>
<p>Use links to allow navigation to internal and external URLs.</p>
<pre><code class="py">from h2o_q import site, ui

page = site['/demo']

page['example'] = ui.form_card(
    box='1 1 4 -1',
    items=[
        ui.link(label='Internal link', path='/starred'),
        ui.link(label='Internal link, disabled', path='/starred', disabled=True),
        ui.link(label='External link', path='https://h2o.ai'),
        ui.link(label='External link, disabled', path='https://h2o.ai', disabled=True),
    ]
)
page.save()
</code></pre>
<h2 id="form-progress">Form / Progress</h2>
<p>Use a progress bar to indicate completion status of an operation.</p>
<pre><code class="py">from h2o_q import site, ui

page = site['/demo']

page['example'] = ui.form_card(
    box='1 1 4 -1',
    items=[
        ui.progress(label='Indeterminate Progress', caption='Goes on forever'),
        ui.progress(label='Standard Progress', caption='Downloading the interwebs...', value=0.25),
    ]
)
page.save()
</code></pre>
<h2 id="form-progress-updating">Form / Progress / Updating</h2>
<p>Update a progress bar's completion status periodically.</p>
<pre><code class="py">import time

from h2o_q import site, ui

page = site['/demo']

page['example'] = ui.form_card(
    box='1 1 4 -1',
    items=[
        ui.progress(label='Basic Progress'),
    ]
)
page.save()

for i in range(1, 11):
    time.sleep(1)
    page['example'].items = [
        ui.progress(label='Basic Progress', caption=f'{i * 10}% complete', value=i / 10),
    ]

    # This will work, too:
    # page['example'].items[0].progress.value = i/10

    page.save()
</code></pre>
<h2 id="form-message-bar">Form / Message Bar</h2>
<p>Use message bars to indicate relevant status information.</p>
<pre><code class="py">from h2o_q import site, ui

page = site['/demo']

page['example'] = ui.form_card(
    box='1 1 4 -1',
    items=[
        ui.message_bar(type='blocked', text='You are not authorized to perform this action.'),
        ui.message_bar(type='error', text='This is an error message.'),
        ui.message_bar(type='warning', text='This is a warning message.'),
        ui.message_bar(type='info', text='This is an information message.'),
        ui.message_bar(type='success', text='This is an success message.'),
        ui.message_bar(type='danger', text='This is a danger message.'),
    ]
)
page.save()
</code></pre>
<h2 id="form-textbox">Form / Textbox</h2>
<p>Use a textbox to allow users to provide text inputs.</p>
<pre><code class="py">from h2o_q import Q, listen, ui


async def main(q: Q):
    if q.args.show_inputs:
        q.page['example'].items = [
            ui.text(f'textbox={q.args.textbox}'),
            ui.text(f'textbox_disabled={q.args.textbox_disabled}'),
            ui.text(f'textbox_readonly={q.args.textbox_readonly}'),
            ui.text(f'textbox_required={q.args.textbox_required}'),
            ui.text(f'textbox_error={q.args.textbox_error}'),
            ui.text(f'textbox_mask={q.args.textbox_mask}'),
            ui.text(f'textbox_icon={q.args.textbox_icon}'),
            ui.text(f'textbox_prefix={q.args.textbox_prefix}'),
            ui.text(f'textbox_suffix={q.args.textbox_suffix}'),
            ui.text(f'textbox_placeholder={q.args.textbox_placeholder}'),
            ui.text(f'textbox_disabled_placeholder={q.args.textbox_disabled_placeholder}'),
            ui.text(f'textbox_multiline={q.args.textbox_multiline}'),
            ui.button(name='show_form', label='Back', primary=True),
        ]
    else:
        q.page['example'] = ui.form_card(box='1 1 4 10', items=[
            ui.textbox(name='textbox', label='Standard'),
            ui.textbox(name='textbox_disabled', label='Disabled', value='I am disabled', disabled=True),
            ui.textbox(name='textbox_readonly', label='Read-only', value='I am read-only', readonly=True),
            ui.textbox(name='textbox_required', label='Required', required=True),
            ui.textbox(name='textbox_error', label='With error message', error='I have an error'),
            ui.textbox(name='textbox_mask', label='With input mask', mask='(999) 999 - 9999'),
            ui.textbox(name='textbox_icon', label='With icon', icon='Calendar'),
            ui.textbox(name='textbox_prefix', label='With prefix', prefix='http://'),
            ui.textbox(name='textbox_suffix', label='With suffix', suffix='@h2o.ai'),
            ui.textbox(name='textbox_placeholder', label='With placeholder', placeholder='I need some input'),
            ui.textbox(name='textbox_disabled_placeholder', label='Disabled with placeholder', disabled=True,
                       placeholder='I am disabled'),
            ui.textbox(name='textbox_multiline', label='Multiline textarea', multiline=True),
            ui.button(name='show_inputs', label='Submit', primary=True),
        ])
    await q.page.save()


if __name__ == '__main__':
    listen('/demo', main)
</code></pre>
<h2 id="form-textbox-trigger">Form / Textbox / trigger</h2>
<p>Use a textbox with a trigger flag to allow users to sync user input after typing.</p>
<pre><code class="py">from h2o_q import Q, listen, ui

def convert_to_piglatin(pigLatin: str):
  if pigLatin is None:
    return ''
  wordList = pigLatin.lower().strip().split(&quot; &quot;)
  pigLatin = []
  for word in wordList:
      if word[0] in 'aeiou':
          pigLatin.append(f'{word}yay')
      else:
          for letter in word:
              if letter in 'aeiou':
                  pigLatin.append(f'{word[word.index(letter):]}{word[:word.index(letter)]}ay')
                  break
  return &quot; &quot;.join(pigLatin)


async def main(q: Q):
    q.page['example'] = ui.form_card(box='1 1 4 10', items=[
        ui.text(f'Pig latin translation={convert_to_piglatin(q.args.translation)}'),
        ui.textbox(name='translation', label='Text for translation', multiline=True, trigger=True),
    ])
    await q.page.save()


if __name__ == '__main__':
    listen('/demo', main)
</code></pre>
<h2 id="form-button">Form / Button</h2>
<p>Use buttons to enable a user to commit a change or complete steps in a task.</p>
<pre><code class="py">from h2o_q import Q, listen, ui


async def main(q: Q):
    if 'basic_button' in q.args:
        q.page['example'].items = [
            ui.text(f'basic_button={q.args.basic_button}'),
            ui.text(f'primary_button={q.args.primary_button}'),
            ui.text(f'link_button={q.args.link_button}'),
            ui.text(f'basic_disabled_button={q.args.basic_disabled_button}'),
            ui.text(f'primary_disabled_button={q.args.primary_disabled_button}'),
            ui.text(f'link_disabled_button={q.args.link_disabled_button}'),
            ui.text(f'basic_compound_button={q.args.basic_compound_button}'),
            ui.text(f'primary_compound_button={q.args.primary_compound_button}'),
            ui.text(f'basic_compound_disabled_button={q.args.basic_compound_disabled_button}'),
            ui.text(f'primary_compound_disabled_button={q.args.primary_compound_disabled_button}'),
            ui.button(name='show_form', label='Back', primary=True),
        ]
    else:
        q.page['example'] = ui.form_card(box='1 1 4 10', items=[
            ui.button(name='basic_button', label='Basic'),
            ui.button(name='primary_button', label='Primary', primary=True),
            ui.button(name='link_button', label='Link', link=True),
            ui.button(name='basic_disabled_button', label='Basic (Disabled)', disabled=True),
            ui.button(name='primary_disabled_button', label='Primary (Disabled)', primary=True, disabled=True),
            ui.button(name='link_disabled_button', label='Link (Disabled)', link=True, disabled=True),
            ui.button(name='basic_compound_button', label='Basic', caption='Compound Button.'),
            ui.button(name='primary_compound_button', label='Primary', caption='Compound Button', primary=True),
            ui.button(name='basic_compound_disabled_button', label='Basic (Disabled)', caption='Compound Button',
                      disabled=True),
            ui.button(name='primary_compound_disabled_button', label='Primary (Disabled)', caption='Compound Button',
                      primary=True, disabled=True),
        ])
    await q.page.save()


if __name__ == '__main__':
    listen('/demo', main)
</code></pre>
<h2 id="form-buttons">Form / Buttons</h2>
<p>Use the <code><a title="h2o_q.ui.buttons" href="ui.html#h2o_q.ui.buttons">buttons()</a></code> function to group related buttons.</p>
<pre><code class="py">from h2o_q import Q, listen, ui


async def main(q: Q):
    if 'standard_button' in q.args:
        q.page['example'].items = [
            ui.text(f'primary_button={q.args.primary_button}'),
            ui.text(f'standard_button={q.args.standard_button}'),
            ui.text(f'standard_disabled_button={q.args.standard_disabled_button}'),
            ui.button(name='show_form', label='Back', primary=True),
        ]
    else:
        q.page['example'] = ui.form_card(box='1 1 4 10', items=[
            ui.buttons([
                ui.button(name='primary_button', label='Primary', primary=True),
                ui.button(name='standard_button', label='Standard'),
                ui.button(name='standard_disabled_button', label='Standard', disabled=True),
            ]),
        ])
    await q.page.save()


if __name__ == '__main__':
    listen('/demo', main)
</code></pre>
<h2 id="form-checkbox">Form / Checkbox</h2>
<p>Use checkboxes to switch between two mutually exclusive options.</p>
<pre><code class="py">from h2o_q import Q, listen, ui


async def main(q: Q):
    if q.args.show_inputs:
        q.page['example'].items = [
            ui.text(f'checkbox_unchecked={q.args.checkbox_unchecked}'),
            ui.text(f'checkbox_checked={q.args.checkbox_checked}'),
            ui.text(f'checkbox_indeterminate={q.args.checkbox_indeterminate}'),
            ui.text(f'checkbox_unchecked_disabled={q.args.checkbox_unchecked_disabled}'),
            ui.text(f'checkbox_checked_disabled={q.args.checkbox_checked_disabled}'),
            ui.text(f'checkbox_indeterminate_disabled={q.args.checkbox_indeterminate_disabled}'),
            ui.button(name='show_form', label='Back', primary=True),
        ]
    else:
        q.page['example'] = ui.form_card(box='1 1 4 10', items=[
            ui.checkbox(name='checkbox_unchecked', label='Not checked'),
            ui.checkbox(name='checkbox_checked', label='Checked', value=True),
            ui.checkbox(name='checkbox_indeterminate', label='Indeterminate', indeterminate=True),
            ui.checkbox(name='checkbox_unchecked_disabled', label='Not checked (Disabled)', disabled=True),
            ui.checkbox(name='checkbox_checked_disabled', label='Checked (Disabled)', value=True, disabled=True),
            ui.checkbox(name='checkbox_indeterminate_disabled', label='Indeterminate (Disabled)', indeterminate=True,
                        disabled=True),
            ui.button(name='show_inputs', label='Submit', primary=True),
        ])
    await q.page.save()


if __name__ == '__main__':
    listen('/demo', main)
</code></pre>
<h2 id="form-checklist">Form / Checklist</h2>
<p>Use a checklist to group a set of related checkboxes.</p>
<pre><code class="py">from h2o_q import Q, listen, ui


async def main(q: Q):
    if q.args.show_inputs:
        q.page['example'].items = [
            ui.text(f'selected={q.args.checklist}'),
            ui.button(name='show_form', label='Back', primary=True),
        ]
    else:
        q.page['example'] = ui.form_card(box='1 1 4 10', items=[
            ui.checklist(name='checklist', label='Choices',
                         choices=[ui.choice(name=x, label=x) for x in ['Egg', 'Bacon', 'Spam']]),
            ui.button(name='show_inputs', label='Submit', primary=True),
        ])
    await q.page.save()


if __name__ == '__main__':
    listen('/demo', main)
</code></pre>
<h2 id="form-picker">Form / Picker</h2>
<p>Use pickers to allow users to select one or more choices, such as tags or files,â€¯from a list.</p>
<pre><code class="py">from h2o_q import Q, listen, ui


async def main(q: Q):
    if q.args.show_inputs:
        q.page['example'].items = [
            ui.text(f'selected={q.args.picker}'),
            ui.button(name='show_form', label='Back', primary=True),
        ]
    else:
        q.page['example'] = ui.form_card(box='1 1 4 10', items=[
          ui.picker(name='picker', label='Picker showcase', choices=[
            ui.choice(name='spam', label='Spam'),
            ui.choice(name='eggs', label= 'Eggs'),
            ui.choice(name='ham', label= 'Ham'),
            ui.choice(name='cheese', label='Cheese'),
            ui.choice(name='beans', label='Beans'),
            ui.choice(name='toast', label='Toast'),
          ]),
          ui.button(name='show_inputs', label='Submit', primary=True),
        ])
    await q.page.save()


if __name__ == '__main__':
    listen('/demo', main)
</code></pre>
<h2 id="form-picker-selection">Form / Picker / Selection</h2>
<p>Pre-select choices while displaying a picker.</p>
<pre><code class="py">from h2o_q import Q, listen, ui


async def main(q: Q):
    if q.args.show_inputs:
        q.page['example'].items = [
            ui.text(f'selected={q.args.picker}'),
            ui.button(name='show_form', label='Back', primary=True),
        ]
    else:
        q.page['example'] = ui.form_card(box='1 1 4 10', items=[
          ui.picker(name='picker', label='Picker with initial values', choices=[
            ui.choice(name='spam', label='Spam'),
            ui.choice(name='eggs', label= 'Eggs'),
            ui.choice(name='ham', label= 'Ham'),
            ui.choice(name='cheese', label='Cheese'),
            ui.choice(name='beans', label='Beans'),
            ui.choice(name='toast', label='Toast'),
          ], values=['spam','eggs']),
          ui.button(name='show_inputs', label='Submit', primary=True),
        ])
    await q.page.save()


if __name__ == '__main__':
    listen('/demo', main)
</code></pre>
<h2 id="form-dropdown">Form / Dropdown</h2>
<p>Use dropdowns to allow users to choose between available choices.</p>
<pre><code class="py">from h2o_q import Q, listen, ui

choices = [
    ui.choice('A', 'Option A'),
    ui.choice('B', 'Option B'),
    ui.choice('C', 'Option C', disabled=True),
    ui.choice('D', 'Option D'),
]


async def main(q: Q):
    if q.args.show_inputs:
        q.page['example'].items = [
            ui.text(f'dropdown={q.args.dropdown}'),
            ui.text(f'dropdown_multi={q.args.dropdown_multi}'),
            ui.text(f'dropdown_disabled={q.args.dropdown_disabled}'),
            ui.button(name='show_form', label='Back', primary=True),
        ]
    else:
        q.page['example'] = ui.form_card(box='1 1 4 10', items=[
            ui.dropdown(name='dropdown', label='Pick one', value='B', required=True, choices=choices),
            ui.dropdown(name='dropdown_multi', label='Pick multiple', values=['B', 'D'], required=True,
                        choices=choices),
            ui.dropdown(name='dropdown_disabled', label='Pick one (Disabled)', value='B', choices=choices,
                        disabled=True),
            ui.button(name='show_inputs', label='Submit', primary=True),
        ])
    await q.page.save()


if __name__ == '__main__':
    listen('/demo', main)
</code></pre>
<h2 id="form-choice-group">Form / Choice Group</h2>
<p>Use choice groups to let users select one option from two or more choices.</p>
<pre><code class="py">from h2o_q import Q, listen, ui

choices = [
    ui.choice('A', 'Option A'),
    ui.choice('B', 'Option B'),
    ui.choice('C', 'Option C', disabled=True),
    ui.choice('D', 'Option D'),
]


async def main(q: Q):
    if q.args.show_inputs:
        q.page['example'].items = [
            ui.text(f'selected={q.args.choice_group}'),
            ui.button(name='show_form', label='Back', primary=True),
        ]
    else:
        q.page['example'] = ui.form_card(box='1 1 4 10', items=[
            ui.choice_group(name='choice_group', label='Pick one', value='B', required=True, choices=choices),
            ui.button(name='show_inputs', label='Submit', primary=True),
        ])
    await q.page.save()


if __name__ == '__main__':
    listen('/demo', main)
</code></pre>
<h2 id="form-combobox">Form / Combobox</h2>
<p>Use comboboxes to allow users to either choose between available choices or indicate a choice by free-form editing.</p>
<pre><code class="py">from h2o_q import Q, listen, ui

combobox_choices = ['Cyan', 'Magenta', 'Yellow', 'Black']


async def main(q: Q):
    if q.args.show_inputs:
        q.page['example'].items = [
            ui.text(f'combobox={q.args.combobox}'),
            ui.text(f'combobox_disabled={q.args.combobox_disabled}'),
            ui.text(f'combobox_error={q.args.combobox_error}'),
            ui.button(name='show_form', label='Back', primary=True),
        ]
    else:
        q.page['example'] = ui.form_card(box='1 1 4 10', items=[
            ui.combobox(name='combobox', label='Enter or choose a color', placeholder='Color...', value='Blue',
                        choices=combobox_choices),
            ui.combobox(name='combobox_disabled', label='Enter or choose a color', placeholder='Color...', value='Blue',
                        choices=combobox_choices, disabled=True),
            ui.combobox(name='combobox_error', label='Enter or choose a color', placeholder='Color...', value='Blue',
                        choices=combobox_choices, error='This combobox has an error!'),
            ui.button(name='show_inputs', label='Submit', primary=True),
        ])
    await q.page.save()


if __name__ == '__main__':
    listen('/demo', main)
</code></pre>
<h2 id="form-toggle">Form / Toggle</h2>
<p>Use a toggle to present users with two mutually exclusive options (to turn settings on and off).</p>
<pre><code class="py">from h2o_q import Q, listen, ui


async def main(q: Q):
    if q.args.show_inputs:
        q.page['example'].items = [
            ui.text(f'toggle_unchecked={q.args.toggle_unchecked}'),
            ui.text(f'toggle_checked={q.args.toggle_checked}'),
            ui.text(f'toggle_unchecked_disabled={q.args.toggle_unchecked_disabled}'),
            ui.text(f'toggle_checked_disabled={q.args.toggle_checked_disabled}'),
            ui.button(name='show_form', label='Back', primary=True),
        ]
    else:
        q.page['example'] = ui.form_card(box='1 1 4 10', items=[
            ui.toggle(name='toggle_unchecked', label='Not checked'),
            ui.toggle(name='toggle_checked', label='Checked', value=True),
            ui.toggle(name='toggle_unchecked_disabled', label='Not checked (Disabled)', disabled=True),
            ui.toggle(name='toggle_checked_disabled', label='Checked (Disabled)', value=True, disabled=True),
            ui.button(name='show_inputs', label='Submit', primary=True),
        ])
    await q.page.save()


if __name__ == '__main__':
    listen('/demo', main)
</code></pre>
<h2 id="form-spinbox">Form / Spinbox</h2>
<p>Use a spinbox to allow users to incrementally adjust a value in small steps.</p>
<pre><code class="py">from h2o_q import Q, listen, ui


async def main(q: Q):
    if q.args.show_inputs:
        q.page['example'].items = [
            ui.text(f'spinbox={q.args.spinbox}'),
            ui.text(f'spinbox_disabled={q.args.spinbox_disabled}'),
            ui.button(name='show_form', label='Back', primary=True),
        ]
    else:
        q.page['example'] = ui.form_card(box='1 1 4 10', items=[
            ui.spinbox(name='spinbox', label='Standard spinbox', min=0, max=100, step=10, value=30),
            ui.spinbox(name='spinbox_disabled', label='Disabled spinbox', min=0, max=100, step=10, value=30,
                       disabled=True),
            ui.button(name='show_inputs', label='Submit', primary=True),
        ])
    await q.page.save()


if __name__ == '__main__':
    listen('/demo', main)
</code></pre>
<h2 id="form-slider">Form / Slider</h2>
<p>Use a slider to allow users to set a value within a specific range.</p>
<pre><code class="py">from h2o_q import Q, listen, ui


async def main(q: Q):
    if q.args.show_inputs:
        q.page['example'].items = [
            ui.text(f'slider={q.args.slider}'),
            ui.text(f'slider_zero={q.args.slider_zero}'),
            ui.text(f'slider_disabled={q.args.slider_disabled}'),
            ui.button(name='show_form', label='Back', primary=True),
        ]
    else:
        q.page['example'] = ui.form_card(box='1 1 4 10', items=[
            ui.slider(name='slider', label='Standard slider', min=0, max=100, step=10, value=30),
            ui.slider(name='slider_zero', label='Origin from zero', min=-10, max=10, step=1, value=-3),
            ui.slider(name='slider_disabled', label='Disabled slider', min=0, max=100, step=10, value=30,
                      disabled=True),
            ui.button(name='show_inputs', label='Submit', primary=True),
        ])
    await q.page.save()


if __name__ == '__main__':
    listen('/demo', main)
</code></pre>
<h2 id="form-range-slider">Form / Range Slider</h2>
<p>Use a range slider to allow users to select a value range (from, to).</p>
<pre><code class="py">from h2o_q import Q, listen, ui


async def main(q: Q):
    if q.args.show_inputs:
        q.page['example'].items = [
            ui.text(f'range_slider={q.args.range_slider}'),
            ui.text(f'range_slider_step={q.args.range_slider_step}'),
            ui.text(f'range_slider_disabled={q.args.range_slider_disabled}'),
            ui.button(name='show_form', label='Back', primary=True),
        ]
    else:
        q.page['example'] = ui.form_card(box='1 1 4 10', items=[
            ui.range_slider(name='range_slider', label='Default slider'),
            ui.range_slider(name='range_slider_step', label='Step slider', min=0, max=1000, step=100, min_value=0, max_value=100),
            ui.range_slider(name='range_slider_disabled', label='Disabled slider', min=0, max=100, step=10, min_value=0, 
              max_value=70, disabled=True),
            ui.button(name='show_inputs', label='Submit', primary=True),
        ])
    await q.page.save()


if __name__ == '__main__':
    listen('/demo', main)
</code></pre>
<h2 id="form-date-picker">Form / Date Picker</h2>
<p>Use date pickers to allow users to pick dates.</p>
<pre><code class="py">from h2o_q import Q, listen, ui


async def main(q: Q):
    if q.args.show_inputs:
        q.page['example'].items = [
            ui.text(f'date={q.args.date}'),
            ui.text(f'date_placeholder={q.args.date_placeholder}'),
            ui.text(f'date_disabled={q.args.date_disabled}'),
            ui.button(name='show_form', label='Back', primary=True),
        ]
    else:
        q.page['example'] = ui.form_card(box='1 1 4 10', items=[
            ui.date_picker(name='date', label='Standard date picker', value='2017-10-19'),
            ui.date_picker(name='date_placeholder', label='Date picker with placeholder', placeholder='Pick a date'),
            ui.date_picker(name='date_disabled', label='Disabled date picker', value='2017-10-19', disabled=True),
            ui.button(name='show_inputs', label='Submit', primary=True),
        ])
    await q.page.save()


if __name__ == '__main__':
    listen('/demo', main)
</code></pre>
<h2 id="form-color-picker">Form / Color Picker</h2>
<p>Use a color picker to allow a user to select a color.</p>
<pre><code class="py">from h2o_q import Q, listen, ui


async def main(q: Q):
    if q.args.show_inputs:
        q.page['example'].items = [
            ui.text(f'color={q.args.color}'),
            ui.button(name='show_form', label='Back', primary=True),
        ]
    else:
        q.page['example'] = ui.form_card(box='1 1 4 10', items=[
            ui.color_picker(name='color', label='Pick a color', value='#F25F5C'),
            ui.button(name='show_inputs', label='Submit', primary=True),
        ])
    await q.page.save()


if __name__ == '__main__':
    listen('/demo', main)
</code></pre>
<h2 id="form-swatch-picker">Form / Swatch Picker</h2>
<p>Use a swatch picker to allow users to choose a from a specific set of colors.</p>
<pre><code class="py">from h2o_q import Q, listen, ui


async def main(q: Q):
    if q.args.show_inputs:
        q.page['example'].items = [
            ui.text(f'swatch={q.args.swatch}'),
            ui.button(name='show_form', label='Back', primary=True),
        ]
    else:
        q.page['example'] = ui.form_card(box='1 1 4 10', items=[
            ui.color_picker(
                name='swatch',
                label='Pick a swatch',
                choices=[
                    '#011627', '#2EC4B6', '#E71D36', '#FF9F1C', '#50514F',
                    '#F25F5C', '#FFE066', '#247BA0', '#70C1B3', '#FDFFFC',
                ]),
            ui.button(name='show_inputs', label='Submit', primary=True),
        ])
    await q.page.save()


if __name__ == '__main__':
    listen('/demo', main)
</code></pre>
<h2 id="form-tabs">Form / Tabs</h2>
<p>Use tabs within a form to navigate between two or more distinct content categories.</p>
<pre><code class="py">from h2o_q import Q, listen, ui

tabs = [
    ui.tab(name='email', label='Mail', icon='Mail'),
    ui.tab(name='events', label='Events', icon='Calendar'),
    ui.tab(name='spam', label='Spam'),
]


async def main(q: Q):
    if q.args.menu:
        q.page['example'].items = [
            ui.tabs(name='menu', value=q.args.menu, items=tabs),
            get_tab_content(q.args.menu),
        ]
    else:
        q.page['example'] = ui.form_card(box='1 1 4 10', items=[
            ui.tabs(name='menu', value='email', items=tabs),
            get_tab_content('email'),
        ])
    await q.page.save()


def get_tab_content(category: str):
    # Return a checklist of dummy items.
    items = [f'{category.title()} {i}' for i in range(1, 11)]
    return ui.checklist(name='items', choices=[ui.choice(name=item, label=item) for item in items])


if __name__ == '__main__':
    listen('/demo', main)
</code></pre>
<h2 id="form-separator">Form / Separator</h2>
<p>Use a separator to visually separate content into groups.</p>
<pre><code class="py">from h2o_q import site, ui

page = site['/demo']

page['example'] = ui.form_card(
    box='1 1 2 5',
    items=[
        ui.separator(label='Separator 1'),
        ui.text('The quick brown fox jumps over the lazy dog.'),
        ui.separator(label='Separator 2'),
        ui.text('The quick brown fox jumps over the lazy dog.'),
        ui.separator(label='Separator 3'),
        ui.text('The quick brown fox jumps over the lazy dog.'),
    ]
)

page.save()
</code></pre>
<h2 id="form-file-upload">Form / File Upload</h2>
<p>Use a file upload component to allow users to upload files.</p>
<pre><code class="py">from h2o_q import site, ui

page = site['/demo']

page['example'] = ui.form_card(
    box='1 1 4 10',
    items=[
        ui.file_upload(name='file_upload', label='Upload!', multiple=True,
        file_extensions=['csv', 'gz'], max_file_size=10, max_size=15)
    ]
)

page.save()
</code></pre>
<h2 id="image">Image</h2>
<p>Use an image card to display a base64-encoded image.</p>
<pre><code class="py">from h2o_q import site, ui
import io
import base64
import numpy as np
import matplotlib.pyplot as plt

np.random.seed(19680801)

n = 25
plt.figure(figsize=(3, 3))
plt.scatter(
    np.random.rand(n), np.random.rand(n),
    s=(30 * np.random.rand(n)) ** 2,
    c=np.random.rand(n),
    alpha=0.5,
)

buf = io.BytesIO()
plt.savefig(buf, format='png')
buf.seek(0)
image = base64.b64encode(buf.read()).decode('utf-8')

page = site['/demo']
page['example'] = ui.image_card(
    box='1 1 3 5',
    title='An image',
    type='png',
    image=image,
)
page.save()
</code></pre>
<h2 id="form-frame">Form / Frame</h2>
<p>Use a frame component in a form card to display HTML content inline.</p>
<pre><code class="py">from h2o_q import site, ui

html = '''
&lt;!DOCTYPE html&gt;
&lt;html&gt;
&lt;body&gt;
  &lt;h1&gt;Hello World!&lt;/h1&gt;
&lt;/body&gt;
&lt;/html&gt;
'''

page = site['/demo']

page['example'] = ui.form_card(
    box='1 1 2 2',
    items=[
        ui.frame(content=html, height='100px')
    ]
)

page.save()
</code></pre>
<h2 id="form-frame-path">Form / Frame / Path</h2>
<p>Use a frame component in a form card to display external web pages.</p>
<pre><code class="py">from h2o_q import site, ui

page = site['/demo']

page['example'] = ui.form_card(
    box='1 1 6 5',
    items=[
        ui.frame(path='https://example.com', height='400px')
    ]
)

page.save()
</code></pre>
<h2 id="frame">Frame</h2>
<p>Use a frame card to display HTML content.</p>
<pre><code class="py">from h2o_q import site, ui

html = '''
&lt;!DOCTYPE html&gt;
&lt;html&gt;
&lt;body&gt;
  &lt;h1&gt;Hello World!&lt;/h1&gt;
&lt;/body&gt;
&lt;/html&gt;
'''

page = site['/demo']

page['example'] = ui.frame_card(
    box='1 1 2 2',
    title='Example',
    content=html,
)

page.save()
</code></pre>
<h2 id="frame-path">Frame / Path</h2>
<p>Use a frame card to display external web pages.</p>
<pre><code class="py">from h2o_q import site, ui

page = site['/demo']

page['example'] = ui.frame_card(
    box='1 1 6 5',
    title='Example',
    path='https://example.com',
)

page.save()
</code></pre>
<h2 id="lists">Lists</h2>
<p>Use list cards to lay out multiple child cards in the form of a list.</p>
<pre><code class="py">import random

from faker import Faker

from h2o_q import site, ui, pack, data

fake = Faker()

page = site['/demo']

c = page.add('example', ui.list_card(
    box='1 1 2 4',
    item_view='list_item1',
    item_props=pack(dict(title='=code', caption='=currency', value='=trades', aux_value='=returns')),
    title='Exchange Rates',
    data=data('currency code trades returns', -15),
))
c.data = [[fake.cryptocurrency_name(), fake.cryptocurrency_code(), random.randint(100, 1000), random.randint(10, 100)]
          for _ in range(15)]

page.save()
</code></pre>
<h2 id="grid">Grid</h2>
<p>Use a grid card to lay out multiple child cards in table form.</p>
<pre><code class="py">import random

from faker import Faker

from h2o_q import site, ui, pack, data

fake = Faker()

page = site['/demo']

c = page.add('example', ui.grid_card(
    box='1 1 3 4',
    title='Currency Trades',
    cells=pack([
        dict(title='Currency', value='=currency'),
        dict(title='Trades',
             view='list_item1',
             props=dict(title='=code', caption='1 hour ago', value='=trades', aux_value='=returns')),
    ]),
    data=data('currency code trades returns', -15),
))
c.data = [
    [fake.cryptocurrency_name(), fake.cryptocurrency_code(), random.randint(100, 1000), random.randint(10, 100)] for
    _ in range(15)]

page.save()
</code></pre>
<h2 id="flex">Flex</h2>
<p>Use a flex card to tile multiple child cards along one dimension, with optional wrapping.</p>
<pre><code class="py">import random

from faker import Faker

from h2o_q import site, ui, pack, data

fake = Faker()

page = site['/demo']

c = page.add('example', ui.flex_card(
    box='1 1 1 1',
    direction='horizontal',
    justify='between',
    wrap='between',
    item_view='template',
    item_props=pack(dict(
        content='&lt;div style=&quot;width:15px; height:15px; border-radius: 50%; background-color:{{#if loss}}red{{else}}green{{/if}}&quot; title=&quot;{{code}}&quot;/&gt;'
    )),
    data=data('code loss', -10),
))
c.data = [[fake.cryptocurrency_code(), random.randint(0, 1)] for _ in range(10)]

page.save()
</code></pre>
<h2 id="repeat">Repeat</h2>
<p>Use a repeat card to render a card repeatedly.</p>
<pre><code class="py">import random

from faker import Faker

from h2o_q import site, ui, pack, data

fake = Faker()

page = site['/demo']

c = page.add('example', ui.repeat_card(
    box='1 1 2 4',
    item_view='list_item1',
    item_props=pack(dict(title='=code', caption='=currency', value='=trades', aux_value='=returns')),
    data=data('currency code trades returns', -15),
))

c.data = [[fake.cryptocurrency_name(), fake.cryptocurrency_code(), random.randint(100, 1000), random.randint(10, 100)]
          for _ in range(15)]

page.save()
</code></pre>
<h2 id="template">Template</h2>
<p>Use a template card to render dynamic content using a HTML template.</p>
<pre><code class="py">from h2o_q import site, pack, ui

page = site['/demo']
page.drop()

menu = '''
&lt;ol&gt;
{{#each dishes}}
&lt;li&gt;&lt;strong&gt;{{name}}&lt;/strong&gt; costs {{price}}&lt;/li&gt;
{{/each}}
&lt;/ol
'''

c = page.add('template_example', ui.template_card(
    box=f'1 1 2 2',
    title='Menu',
    content=menu,
    data=pack(dict(dishes=[
        dict(name='Spam', price='$2.00'),
        dict(name='Ham', price='$3.45'),
        dict(name='Eggs', price='$1.75'),
    ])),
))
page.save()
</code></pre>
<h2 id="template-data">Template / Data</h2>
<p>Update a template card's data periodically.</p>
<pre><code class="py">import time
import random
from h2o_q import site, ui

page = site['/demo']
page.drop()

menu = '''
&lt;ol&gt;
{{#each dishes}}
&lt;li&gt;&lt;strong&gt;{{name}}&lt;/strong&gt; costs {{price}}&lt;/li&gt;
{{/each}}
&lt;/ol
'''

menu_card = page.add('template_example', ui.template_card(
    box=f'1 1 2 2',
    title='Surge-priced Menu',
    content=menu,
    data=dict(dishes=[
        dict(name='Spam', price='$2.00'),
        dict(name='Ham', price='$3.45'),
        dict(name='Eggs', price='$1.75'),
    ]),
))
page.save()


def rand_price(): return f'${random.randrange(0, 4)}.{random.randrange(10, 99)}'


dishes = menu_card.data.dishes
for i in range(98, 2, -1):
    time.sleep(1)
    dishes[0].price = rand_price()
    dishes[1].price = rand_price()
    dishes[2].price = rand_price()
    page.save()
</code></pre>
<h2 id="markdown">Markdown</h2>
<p>Use a markdown card to display formatted content using markdown.</p>
<pre><code class="py">from h2o_q import site, ui

page = site['/demo']

sample_markdown = '''=
The **quick** _brown_ fox jumped over the lazy dog.

Block quote:

&gt; The quick brown fox jumped over the lazy dog.

Unordered list:

- The quick brown fox jumped over the lazy dog.
- The quick brown fox jumped over the lazy dog.
- The quick brown fox jumped over the lazy dog.

Ordered list:

1. The quick brown fox jumped over the lazy dog.
1. The quick brown fox jumped over the lazy dog.
1. The quick brown fox jumped over the lazy dog.

Image:

![Monty Python](https://upload.wikimedia.org/wikipedia/en/c/cb/Flyingcircus_2.jpg)

Table:

| Column 1 | Column 2 | Column 3 |
| -------- | -------- | -------- |
| Item 1   | Item 2   | Item 3   |
| Item 1   | Item 2   | Item 3   |
| Item 1   | Item 2   | Item 3   |

'''

page['example'] = ui.markdown_card(
    box='1 1 3 -1',
    title='I was made using markdown!',
    content=sample_markdown,
)
page.save()
</code></pre>
<h2 id="markdown-data">Markdown / Data</h2>
<p>Display dynamic formatted content using markdown.</p>
<pre><code class="py">import time
from h2o_q import site, ui

page = site['/demo']

beer_verse = '''
{{before}} bottles of beer on the wall, {{before}} bottles of beer.

Take one down, pass it around, {{after}} bottles of beer on the wall...
'''

beer_card = page.add('example', ui.markdown_card(
    box='1 1 4 -1',
    title='99 Bottles of Beer',
    content='=' + beer_verse,  # Make the verse a template expression by prefixing a '='.
    data=dict(before='99', after='98'),
))

page.save()

for i in range(98, 2, -1):
    time.sleep(1)
    beer_card.data.before = str(i)
    beer_card.data.after = str(i - 1)
    page.save()
</code></pre>
<h2 id="markup">Markup</h2>
<p>Use a markup card to display formatted content using HTML.</p>
<pre><code class="py">from h2o_q import site, ui

page = site['/demo']

menu = '''
&lt;ol&gt;
    &lt;li&gt;Spam&lt;/li&gt;
    &lt;li&gt;Ham&lt;/li&gt;
    &lt;li&gt;Eggs&lt;/li&gt;
&lt;/ol&gt;
'''

page['example'] = ui.markup_card(
    box='1 1 2 2',
    title='Menu',
    content=menu,
)
page.save()
</code></pre>
<h2 id="table">Table</h2>
<p>Use a table to create master-detail views. This example demonstrates how to create a simple issue tracker.</p>
<pre><code class="py">from h2o_q import Q, listen, ui
from faker import Faker

fake = Faker()

_id = 0


class Issue:
    def __init__(self, text: str, status: str):
        global _id
        _id += 1
        self.id = f'I{_id}'
        self.text = text
        self.status = status
        self.views = 0


# Create some issues
issues = [Issue(text=fake.sentence(), status='Open') for i in range(12)]

# Build a lookup of issues for convenience
issue_lookup = {issue.id: issue for issue in issues}

# Create columns for our issue table.
columns = [
    ui.table_column(name='text', label='Issue'),
    ui.table_column(name='status', label='Status'),
    ui.table_column(name='views', label='Views'),
]


def make_issue_table(allow_multiple_selection=False):
    return ui.table(
        name='issues',
        columns=columns,
        rows=[ui.table_row(name=issue.id, cells=[issue.text, issue.status, str(issue.views)]) for issue in issues],
        multiple=allow_multiple_selection,
    )


async def edit_multiple(q: Q):
    q.page['form'] = ui.form_card(
        box='1 1 4 -1',
        items=[
            make_issue_table(allow_multiple_selection=True),  # This time, allow multiple selections
            ui.buttons([
                ui.button(name='reopen_issues', label='Reopen Selected', primary=True),
                ui.button(name='close_issues', label='Close Selected', primary=True),
                ui.button(name='back', label='Back to safety')
            ]),
        ]
    )
    await q.page.save()


async def show_issues(q: Q):
    q.page['form'] = ui.form_card(
        box='1 1 4 -1',
        items=[
            make_issue_table(),
            ui.buttons([ui.button(name='edit_multiple', label='Edit Multiple...', primary=True)]),
        ]
    )
    await q.page.save()


async def show_issue(q: Q, issue_id: str):
    issue = issue_lookup[issue_id]
    issue.views += 1

    q.client.active_issue_id = issue_id

    q.page['form'] = ui.form_card(
        box='1 1 4 -1',
        items=[
            ui.text_xl(f'Issue {issue.id}'),
            ui.text(issue.text),
            ui.text_xs(f'({issue.views} views)'),
            ui.buttons([
                ui.button(
                    name='close_issue' if issue.status == 'Open' else 'reopen_issue',
                    label=&quot;Close Issue&quot; if issue.status == 'Open' else &quot;Reopen Issue&quot;,
                    primary=True,
                ),
                ui.button(name='back', label='Back'),
            ]),
        ]
    )

    await q.page.save()


async def close_issue(q: Q):
    issue = issue_lookup[q.client.active_issue_id]
    issue.status = 'Closed'
    await show_issues(q)


async def close_issues(q: Q):
    for issue_id in q.args.issues:
        issue = issue_lookup[issue_id]
        issue.status = 'Closed'
    await show_issues(q)


async def reopen_issue(q: Q):
    issue = issue_lookup[q.client.active_issue_id]
    issue.status = 'Open'
    await show_issues(q)


async def reopen_issues(q: Q):
    for issue_id in q.args.issues:
        issue = issue_lookup[issue_id]
        issue.status = 'Open'
    await show_issues(q)


async def main(q: Q):
    if q.args.edit_multiple:
        await edit_multiple(q)
    elif q.args.reopen_issues:
        await reopen_issues(q)
    elif q.args.close_issues:
        await close_issues(q)
    elif q.args.reopen_issue:
        await reopen_issue(q)
    elif q.args.close_issue:
        await close_issue(q)
    elif q.args.issues:  # An issue was clicked on
        await show_issue(q, q.args.issues[0])
    else:
        await show_issues(q)


listen('/demo', main)
</code></pre>
<h2 id="nav">Nav</h2>
<p>Use nav cards to display sidebar navigation.</p>
<pre><code class="py">from h2o_q import site, ui

page = site['/demo']

page['tabs'] = ui.nav_card(
    box='1 1 2 5',
    items=[
        ui.nav_group('Menu', items=[
            ui.nav_item(name='#menu/spam', label='Spam'),
            ui.nav_item(name='#menu/ham', label='Ham'),
            ui.nav_item(name='#menu/eggs', label='Eggs'),
        ]),
        ui.nav_group('Help', items=[
            ui.nav_item(name='#about', label='About'),
            ui.nav_item(name='#support', label='Support'),
        ])
    ],
)

page.save()
</code></pre>
<h2 id="toolbar">Toolbar</h2>
<p>Use toolbars to provide commands that operate on the content of a page.</p>
<pre><code class="py">from h2o_q import Q, listen, ui


async def main(q: Q):
    q.page['nav'] = ui.toolbar_card(
        box='1 1 4 1',
        items=[
            ui.command(
                name='new', label='New', icon='Add', items=[
                    ui.command(name='email', label='Email Message', icon='Mail'),
                    ui.command(name='calendar', label='Calendar Event', icon='Calendar'),
                ]
            ),
            ui.command(name='upload', label='Upload', icon='Upload'),
            ui.command(name='share', label='Share', icon='Share'),
            ui.command(name='download', label='Download', icon='Download'),
        ],
        secondary_items=[
            ui.command(name='tile', caption='Grid View', icon='Tiles'),
            ui.command(name='info', caption='Info', icon='Info'),
        ],
        overflow_items=[
            ui.command(name='move', label='Move to...', icon='MoveToFolder'),
            ui.command(name='copy', label='Copy to...', icon='Copy'),
            ui.command(name='rename', label='Rename', icon='Edit'),
        ],
    )
    await q.page.save()


if __name__ == '__main__':
    listen('/demo', main)
</code></pre>
<h2 id="tab">Tab</h2>
<p>Use tab cards to display tabs on a page.</p>
<pre><code class="py">from h2o_q import site, ui

page = site['/demo']

page['tabs'] = ui.tab_card(
    box='1 1 4 1',
    items=[
        ui.tab(name='#menu/spam', label='Spam'),
        ui.tab(name='#menu/ham', label='Ham'),
        ui.tab(name='#menu/eggs', label='Eggs'),
        ui.tab(name='#about', label='About'),
    ],
)

page.save()
</code></pre>
<h2 id="tab-links">Tab / Links</h2>
<p>Use tab cards to display tabs on a page.
This examples render tabs styled as links.</p>
<pre><code class="py">from h2o_q import site, ui

page = site['/demo']

page['tabs'] = ui.tab_card(
    box='1 1 4 1',
    items=[
        ui.tab(name='#menu/spam', label='Spam'),
        ui.tab(name='#menu/ham', label='Ham'),
        ui.tab(name='#menu/eggs', label='Eggs'),
        ui.tab(name='#about', label='About'),
    ],
    link=True,
)

page.save()
</code></pre>
<h2 id="header">Header</h2>
<p>Use a header card to display a page header.</p>
<pre><code class="py">from h2o_q import site, ui

page = site['/demo']
page['header1'] = ui.header_card(
    box='1 1 3 1',
    title='The Amazing Gonkulator',
    subtitle='And now for something completely different!',
)
page['header2'] = ui.header_card(
    box='1 2 3 1',
    title='The Amazing Gonkulator',
    subtitle='And now for something completely different!',
    icon='Design',
)
page['header3'] = ui.header_card(
    box='1 3 3 1',
    title='The Amazing Gonkulator',
    subtitle='And now for something completely different!',
    icon='Cycling',
    icon_color='$violet',
)
page['header4'] = ui.header_card(
    box='1 4 3 1',
    title='The Amazing Gonkulator',
    subtitle='And now for something completely different!',
    icon='ExploreData',
    icon_color='$red',
)
page.save()
</code></pre>
<h2 id="routing">Routing</h2>
<p>Use the browser's <a href="https://developer.mozilla.org/en-US/docs/Web/API/Location/hash">location hash</a> for routing using URLs.</p>
<p>The location hash can be accessed using <code>q.args['#']</code>.</p>
<pre><code class="py">from h2o_q import Q, listen, ui


async def main(q: Q):
    hash = q.args['#']
    if hash:
        blurb = q.page['blurb']
        if hash == 'menu/spam':
            blurb.content = &quot;Sorry, we're out of spam!&quot;
        elif hash == 'menu/ham':
            blurb.content = &quot;Sorry, we're out of ham!&quot;
        elif hash == 'menu/eggs':
            blurb.content = &quot;Sorry, we're out of eggs!&quot;
        elif hash == 'about':
            blurb.content = 'Everything here is gluten-free!'
    else:
        q.page['nav'] = ui.markdown_card(
            box='1 1 4 1',
            title='Links!',
            content='[Spam](#menu/spam) | [Ham](#menu/ham) | [Eggs](#menu/eggs) | [About](#about)',
        )
        q.page['blurb'] = ui.markdown_card(
            box='1 2 4 2',
            title='Store',
            content='Welcome to our store!',
        )
    await q.page.save()


if __name__ == '__main__':
    listen('/demo', main)
</code></pre>
<h2 id="routing-toolbar">Routing / Toolbar</h2>
<p>This example demonstrates how you can observe and handle changes to the browser's
<a href="https://developer.mozilla.org/en-US/docs/Web/API/Location/hash">location hash</a></p>
<p>The location hash can be accessed using <code>q.args['#']</code>.</p>
<pre><code class="py">from h2o_q import Q, listen, ui


async def main(q: Q):
    hash = q.args['#']
    if hash:
        blurb = q.page['blurb']
        if hash == 'menu/spam':
            blurb.content = &quot;Sorry, we're out of spam!&quot;
        elif hash == 'menu/ham':
            blurb.content = &quot;Sorry, we're out of ham!&quot;
        elif hash == 'menu/eggs':
            blurb.content = &quot;Sorry, we're out of eggs!&quot;
        elif hash == 'about':
            blurb.content = 'Everything here is gluten-free!'
    else:
        q.page['nav'] = ui.toolbar_card(
            box='1 1 4 1',
            items=[
                ui.command(name='#menu/spam', label='Spam'),
                ui.command(name='#menu/ham', label='Ham'),
                ui.command(name='#menu/eggs', label='Eggs'),
                ui.command(name='#about', label='About'),
            ],
        )
        q.page['blurb'] = ui.markdown_card(
            box='1 2 4 2',
            title='Store',
            content='Welcome to our store!',
        )
    await q.page.save()


if __name__ == '__main__':
    listen('/demo', main)
</code></pre>
<h2 id="routing-tabs">Routing / Tabs</h2>
<p>This example demonstrates how you can observe and handle changes to the browser's
<a href="https://developer.mozilla.org/en-US/docs/Web/API/Location/hash">location hash</a></p>
<p>The location hash can be accessed using <code>q.args['#']</code>.</p>
<pre><code class="py">from h2o_q import Q, listen, ui


async def main(q: Q):
    hash = q.args['#']
    if hash:
        blurb = q.page['blurb']
        if hash == 'menu/spam':
            blurb.content = &quot;Sorry, we're out of spam!&quot;
        elif hash == 'menu/ham':
            blurb.content = &quot;Sorry, we're out of ham!&quot;
        elif hash == 'menu/eggs':
            blurb.content = &quot;Sorry, we're out of eggs!&quot;
        elif hash == 'about':
            blurb.content = 'Everything here is gluten-free!'
    else:
        q.page['nav'] = ui.tab_card(
            box='1 1 4 1',
            items=[
                ui.tab(name='#menu/spam', label='Spam'),
                ui.tab(name='#menu/ham', label='Ham'),
                ui.tab(name='#menu/eggs', label='Eggs'),
                ui.tab(name='#about', label='About'),
            ],
        )
        q.page['blurb'] = ui.markdown_card(
            box='1 2 4 2',
            title='Store',
            content='Welcome to our store!',
        )
    await q.page.save()


if __name__ == '__main__':
    listen('/demo', main)
</code></pre>
<h2 id="context-menu">Context Menu</h2>
<p>Display a context menu on a card.</p>
<pre><code class="py">import json
from h2o_q import Q, listen, ui, data

# Vega lite spec for a bar plot, defaults to linear scale.
spec_linear_scale = json.dumps(dict(
    mark='bar',
    encoding=dict(
        x=dict(field='a', type='ordinal'),
        y=dict(field='b', type='quantitative')
    )
))

# Vega lite spec for a bar plot, log scaled.
spec_log_scale = json.dumps(dict(
    mark='bar',
    encoding=dict(
        x=dict(field='a', type='ordinal'),
        y=dict(field='b', type='quantitative', scale=dict(type='log'))
    )
))

# Data for our plot.
plot_data = data(fields=[&quot;a&quot;, &quot;b&quot;], rows=[
    [&quot;A&quot;, 28], [&quot;B&quot;, 55], [&quot;C&quot;, 43],
    [&quot;D&quot;, 91], [&quot;E&quot;, 81], [&quot;F&quot;, 53],
    [&quot;G&quot;, 19], [&quot;H&quot;, 87], [&quot;I&quot;, 52]
])

# Create a couple of context menu commands.
log_scale_command = ui.command(
    name='to_log_scale',
    label='Log Scale',
    icon='LineChart',
)
linear_scale_command = ui.command(
    name='to_linear_scale',
    label='Linear Scale',
    icon='LineChart',
)


async def main(q: Q):
    if q.client.plot_added:  # Have we already added a plot?
        example = q.page['example']
        if q.args.to_log_scale:
            # Change to log scale
            example.title = 'Plot (Log Scale)',
            example.specification = spec_log_scale
            example.commands = [linear_scale_command]
        else:
            # Change to linear scale
            example.title = 'Plot (Linear Scale)',
            example.specification = spec_linear_scale
            example.commands = [log_scale_command]
    else:  # Add a new plot
        q.page['example'] = ui.vega_card(
            box='1 1 2 4',
            title='Plot (Linear Scale)',
            specification=spec_linear_scale,
            data=plot_data,
            commands=[log_scale_command],
        )
        # Flag to indicate that we've added a plot
        q.client.plot_added = True

    await q.page.save()


if __name__ == '__main__':
    listen('/demo', main)
</code></pre>
<h2 id="plot-point">Plot / Point</h2>
<p>Make a scatterplot.</p>
<pre><code class="py">from synth import FakeScatter
from h2o_q import site, data, ui

page = site['/demo']

n = 50
f = FakeScatter()
v = page.add('example', ui.plot_card(
    box='1 1 4 5',
    title='Point',
    data=data('price performance', n),
    plot=ui.plot([
        ui.mark(type='point', x='=price', y='=performance')
    ])
))
v.data = [f.next() for i in range(n)]

page.save()
</code></pre>
<h2 id="plot-point-shapes">Plot / Point / Shapes</h2>
<p>Make a scatterplot with categories encoded as mark shapes.</p>
<pre><code class="py">from synth import FakeScatter
from h2o_q import site, data, ui

page = site['/demo']


def create_fake_row(g, f, n):
    return [(g, x, y) for x, y in [f.next() for _ in range(n)]]


n = 30
f1, f2 = FakeScatter(), FakeScatter()
v = page.add('example', ui.plot_card(
    box='1 1 4 5',
    title='Point, shapes',
    data=data('product price performance', n * 2),
    plot=ui.plot([ui.mark(type='point', x='=price', y='=performance', shape='=product', shape_range='circle square')])
))
v.data = create_fake_row('G1', f1, n) + create_fake_row('G2', f1, n)

page.save()
</code></pre>
<h2 id="plot-point-sizes">Plot / Point / Sizes</h2>
<p>Make a scatterplot with mark sizes mapped to a continuous variable (a "bubble plot").</p>
<pre><code class="py">import random

from synth import FakeScatter
from h2o_q import site, data, ui

page = site['/demo']

n = 40
f = FakeScatter()
v = page.add('example', ui.plot_card(
    box='1 1 4 5',
    title='Point, sized',
    data=data('price performance discount', n),
    plot=ui.plot([ui.mark(type='point', x='=price', y='=performance', size='=discount')])
))
v.data = [(x, y, random.randint(1, 10)) for x, y in [f.next() for _ in range(n)]]

page.save()
</code></pre>
<h2 id="plot-point-map">Plot / Point / Map</h2>
<p>Make a plot to compare quantities across categories. Similar to a heatmap, but using size-encoding instead of color-encoding.</p>
<pre><code class="py">from synth import FakeSeries
from h2o_q import site, data, ui

page = site['/demo']

k1, k2 = 20, 10
f = FakeSeries()
v = page.add('example', ui.plot_card(
    box='1 1 4 5',
    title='Points, size-encoded',
    data=data('country product profit', k1 * k2),
    plot=ui.plot([ui.mark(type='point', x='=country', y='=product', size='=profit', shape='circle')])
))
rows = []
for i in range(k1):
    for j in range(k2):
        x, dx = f.next()
        rows.append((f'A{i + 1}', f'B{j + 1}', x))
v.data = rows

page.save()
</code></pre>
<h2 id="plot-point-groups">Plot / Point / Groups</h2>
<p>Make a scatterplot with categories encoded as colors.</p>
<pre><code class="py">from synth import FakeScatter
from h2o_q import site, data, ui

page = site['/demo']


def create_fake_row(g, f, n):
    return [(g, x, y) for x, y in [f.next() for _ in range(n)]]


n = 30
f1, f2, f3 = FakeScatter(), FakeScatter(), FakeScatter()
v = page.add('example', ui.plot_card(
    box='1 1 4 5',
    title='Point, groups',
    data=data('product price performance', n * 3),
    plot=ui.plot([ui.mark(type='point', x='=price', y='=performance', color='=product', shape='circle')])
))
v.data = create_fake_row('G1', f1, n) + create_fake_row('G2', f1, n) + create_fake_row('G3', f1, n)

page.save()
</code></pre>
<h2 id="plot-point-annotation">Plot / Point / Annotation</h2>
<p>Add annotations (points, lines and regions) to a plot.</p>
<pre><code class="py">from synth import FakeScatter
from h2o_q import site, data, ui

page = site['/demo']

n = 50
f = FakeScatter()
v = page.add('example', ui.plot_card(
    box='1 1 4 5',
    title='Numeric-Numeric',
    data=data('price performance', n),
    plot=ui.plot([
        ui.mark(type='point', x='=price', y='=performance', x_min=0, x_max=100, y_min=0, y_max=100),  # the plot
        ui.mark(x=50, y=50, label='point'),  # A single reference point
        ui.mark(x=40, label='vertical line'),
        ui.mark(y=40, label='horizontal line'),
        ui.mark(x=70, x0=60, label='vertical region'),
        ui.mark(y=70, y0=60, label='horizontal region'),
        ui.mark(x=30, x0=20, y=30, y0=20, label='rectangular region')
    ])
))
v.data = [f.next() for _ in range(n)]

page.save()
</code></pre>
<h2 id="plot-point-custom">Plot / Point / Custom</h2>
<p>Customize a plot's fill/stroke color, size and opacity.</p>
<pre><code class="py">import random

from synth import FakeScatter
from h2o_q import site, data, ui

page = site['/demo']

n = 40
f = FakeScatter()
v = page.add('example', ui.plot_card(
    box='1 1 4 5',
    title='Point, custom',
    data=data('price performance discount', n),
    plot=ui.plot([ui.mark(type='point', x='=price', y='=performance', size='=discount', size_range='4 30',
                          fill_color='#eb4559', stroke_color='#eb4559', stroke_size=1, fill_opacity=0.3,
                          stroke_opacity=1)])
))
v.data = [(x, y, random.randint(1, 10)) for x, y in [f.next() for _ in range(n)]]

page.save()
</code></pre>
<h2 id="plot-interval">Plot / Interval</h2>
<p>Make a column plot.</p>
<pre><code class="py">from synth import FakeCategoricalSeries
from h2o_q import site, data, ui

page = site['/demo']

n = 20
f = FakeCategoricalSeries()
v = page.add('example', ui.plot_card(
    box='1 1 4 5',
    title='Interval',
    data=data('product price', n),
    plot=ui.plot([ui.mark(type='interval', x='=product', y='=price', y_min=0)])
))
v.data = [(c, x) for c, x, dx in [f.next() for _ in range(n)]]

page.save()
</code></pre>
<h2 id="plot-interval-transpose">Plot / Interval / Transpose</h2>
<p>Make a bar plot.</p>
<pre><code class="py">from synth import FakeCategoricalSeries
from h2o_q import site, data, ui

page = site['/demo']

n = 20
f = FakeCategoricalSeries()
v = page.add('example', ui.plot_card(
    box='1 1 4 5',
    title='Interval',
    data=data('product price', n),
    plot=ui.plot([ui.mark(type='interval', x='=price', y='=product', y_min=0)])
))
v.data = [(c, x) for c, x, dx in [f.next() for _ in range(n)]]

page.save()
</code></pre>
<h2 id="plot-interval-groups">Plot / Interval / Groups</h2>
<p>Make a grouped column plot.</p>
<pre><code class="py">from synth import FakeMultiCategoricalSeries
from h2o_q import site, data, ui

page = site['/demo']

n = 10
k = 3
f = FakeMultiCategoricalSeries(groups=k)
v = page.add('example', ui.plot_card(
    box='1 1 4 5',
    title='Intervals, groups',
    data=data('country product price', n * k),
    plot=ui.plot([ui.mark(type='interval', x='=product', y='=price', color='=country', dodge='auto', y_min=0)])
))

v.data = [(g, t, x) for x in [f.next() for _ in range(n)] for g, t, x, dx in x]

page.save()
</code></pre>
<h2 id="plot-interval-groups-transpose">Plot / Interval / Groups / Transpose</h2>
<p>Make a grouped bar plot.</p>
<pre><code class="py">from synth import FakeMultiCategoricalSeries
from h2o_q import site, data, ui

page = site['/demo']

n = 10
k = 3
f = FakeMultiCategoricalSeries(groups=k)
v = page.add('example', ui.plot_card(
    box='1 1 4 5',
    title='Intervals, groups',
    data=data('country product price', n * k),
    plot=ui.plot([ui.mark(type='interval', x='=price', y='=product', color='=country', dodge='auto', y_min=0)])
))

v.data = [(g, t, x) for x in [f.next() for _ in range(n)] for g, t, x, dx in x]

page.save()
</code></pre>
<h2 id="plot-interval-labels">Plot / Interval / Labels</h2>
<p>Make a column plot with labels on each bar.</p>
<pre><code class="py">from synth import FakeCategoricalSeries
from h2o_q import site, data, ui

page = site['/demo']

n = 20
f = FakeCategoricalSeries()
v = page.add('example', ui.plot_card(
    box='1 1 4 5',
    title='Label Customization',
    data=data('product price', n),
    plot=ui.plot([
        ui.mark(type='interval', x='=product',
                y='=${{intl price minimum_fraction_digits=2 maximum_fraction_digits=2}}', y_min=0,
                color='#333333',
                label='=${{intl price minimum_fraction_digits=2 maximum_fraction_digits=2}}',
                label_offset=0, label_position='middle', label_rotation='-90', label_fill_color='#fff',
                label_font_weight='bold')])
))
v.data = [(c, x) for c, x, dx in [f.next() for _ in range(n)]]

page.save()
</code></pre>
<h2 id="plot-interval-range">Plot / Interval / Range</h2>
<p>Make a column plot with each bar representing high/low (or start/end) values. Transposing this produces a gantt plot.</p>
<pre><code class="py">import random

from synth import FakeCategoricalSeries
from h2o_q import site, data, ui

page = site['/demo']

n = 20
f = FakeCategoricalSeries()
v = page.add('example', ui.plot_card(
    box='1 1 4 5',
    title='Interval, range',
    data=data('product low high', n),
    plot=ui.plot([ui.mark(type='interval', x='=product', y0='=low', y='=high')])
))
v.data = [(c, x - random.randint(3, 10), x + random.randint(3, 10)) for c, x, dx in [f.next() for _ in range(n)]]

page.save()
</code></pre>
<h2 id="plot-interval-range-transpose">Plot / Interval / Range / Transpose</h2>
<p>Make a bar plot with each bar representing high/low (or start/end) values. Transposing this produces a gantt plot.</p>
<pre><code class="py">import random

from synth import FakeCategoricalSeries
from h2o_q import site, data, ui

page = site['/demo']

n = 20
f = FakeCategoricalSeries()
v = page.add('example', ui.plot_card(
    box='1 1 4 5',
    title='Interval, range',
    data=data('product low high', n),
    plot=ui.plot([ui.mark(type='interval', x0='=low', x='=high', y='=product', )])
))
v.data = [(c, x - random.randint(3, 10), x + random.randint(3, 10)) for c, x, dx in [f.next() for _ in range(n)]]

page.save()
</code></pre>
<h2 id="plot-interval-stacked">Plot / Interval / Stacked</h2>
<p>Make a stacked column plot.</p>
<pre><code class="py">from synth import FakeMultiCategoricalSeries
from h2o_q import site, data, ui

page = site['/demo']

n = 10
k = 5
f = FakeMultiCategoricalSeries(groups=k)
v = page.add('example', ui.plot_card(
    box='1 1 4 5',
    title='Intervals, stacked',
    data=data('country product price', n * k),
    plot=ui.plot([ui.mark(type='interval', x='=product', y='=price', color='=country', stack='auto', y_min=0)])
))

v.data = [(g, t, x) for x in [f.next() for _ in range(n)] for g, t, x, dx in x]

page.save()
</code></pre>
<h2 id="plot-interval-stacked-transpose">Plot / Interval / Stacked / Transpose</h2>
<p>Make a stacked bar plot.</p>
<pre><code class="py">from synth import FakeMultiCategoricalSeries
from h2o_q import site, data, ui

page = site['/demo']

n = 10
k = 5
f = FakeMultiCategoricalSeries(groups=k)
v = page.add('example', ui.plot_card(
    box='1 1 4 5',
    title='Intervals, stacked',
    data=data('country product price', n * k),
    plot=ui.plot([ui.mark(type='interval', x='=price', y='=product', color='=country', stack='auto', y_min=0)])
))

v.data = [(g, t, x) for x in [f.next() for _ in range(n)] for g, t, x, dx in x]

page.save()
</code></pre>
<h2 id="plot-interval-stacked-grouped">Plot / Interval / Stacked / Grouped</h2>
<p>Make a column plot with both stacked and grouped bars.</p>
<pre><code class="py">from synth import FakeMultiCategoricalSeries
from h2o_q import site, data, ui

page = site['/demo']

n = 5
k = 5
f1 = FakeMultiCategoricalSeries(groups=k)
f2 = FakeMultiCategoricalSeries(groups=k)
v = page.add('example', ui.plot_card(
    box='1 1 4 5',
    title='Intervals, stacked and dodged',
    data=data('category country product price', n * k * 2),
    plot=ui.plot([
        ui.mark(type='interval', x='=product', y='=price', color='=country', stack='auto', dodge='=category', y_min=0)])
))

data1 = [('A', g, t, x) for x in [f1.next() for _ in range(n)] for g, t, x, _ in x]
data2 = [('B', g, t, x) for x in [f2.next() for _ in range(n)] for g, t, x, _ in x]
v.data = data1 + data2

page.save()
</code></pre>
<h2 id="plot-interval-stacked-grouped-transpose">Plot / Interval / Stacked / Grouped / Transpose</h2>
<p>Make a bar plot with both stacked and grouped bars.</p>
<pre><code class="py">from synth import FakeMultiCategoricalSeries
from h2o_q import site, data, ui

page = site['/demo']

n = 5
k = 5
f1 = FakeMultiCategoricalSeries(groups=k)
f2 = FakeMultiCategoricalSeries(groups=k)
v = page.add('example', ui.plot_card(
    box='1 1 4 5',
    title='Intervals, stacked and dodged',
    data=data('category country product price', n * k * 2),
    plot=ui.plot([
        ui.mark(type='interval', x='=price', y='=product', color='=country', stack='auto', dodge='=category', x_min=0)])
))

data1 = [('A', g, t, x) for x in [f1.next() for _ in range(n)] for g, t, x, _ in x]
data2 = [('B', g, t, x) for x in [f2.next() for _ in range(n)] for g, t, x, _ in x]
v.data = data1 + data2

page.save()
</code></pre>
<h2 id="plot-interval-polar">Plot / Interval / Polar</h2>
<p>Make a rose plot (a bar plot in polar coordinates).</p>
<pre><code class="py">from synth import FakeCategoricalSeries
from h2o_q import site, data, ui

page = site['/demo']

n = 24
f = FakeCategoricalSeries()
v = page.add('example', ui.plot_card(
    box='1 1 4 5',
    title='Interval, polar',
    data=data('product price', n),
    plot=ui.plot([ui.mark(coord='polar', type='interval', x='=product', y='=price', y_min=0)])
))
v.data = [(c, x) for c, x, dx in [f.next() for _ in range(n)]]

page.save()
</code></pre>
<h2 id="plot-interval-polar-stacked">Plot / Interval / Polar / Stacked</h2>
<p>Make a stacked rose plot (a stacked bar plot in polar coordinates).</p>
<pre><code class="py">from synth import FakeMultiCategoricalSeries
from h2o_q import site, data, ui

page = site['/demo']

n = 10
k = 5
f = FakeMultiCategoricalSeries(groups=k)
v = page.add('example', ui.plot_card(
    box='1 1 4 5',
    title='Intervals, polar, stacked',
    data=data('country product price', n * k),
    plot=ui.plot([
        ui.mark(coord='polar', type='interval', x='=product', y='=price', color='=country', stack='auto', y_min=0)])
))

v.data = [(g, t, x) for x in [f.next() for _ in range(n)] for g, t, x, dx in x]

page.save()
</code></pre>
<h2 id="plot-interval-theta">Plot / Interval / Theta</h2>
<p>Make a "racetrack" plot (a bar plot in polar coordinates, transposed).</p>
<pre><code class="py">from synth import FakeMultiCategoricalSeries
from h2o_q import site, data, ui

page = site['/demo']

n = 10
k = 5
f = FakeMultiCategoricalSeries(groups=k)
v = page.add('example', ui.plot_card(
    box='1 1 4 5',
    title='Intervals, theta, stacked',
    data=data('country product price', n * k),
    plot=ui.plot([
        ui.mark(coord='theta', type='interval', x='=product', y='=price', color='=country', stack='auto', y_min=0)])
))
v.data = [(g, t, x) for x in [f.next() for _ in range(n)] for g, t, x, dx in x]

page.save()
</code></pre>
<h2 id="plot-interval-helix">Plot / Interval / Helix</h2>
<p>Make a bar plot in helical coordinates.</p>
<pre><code class="py">from synth import FakeCategoricalSeries
from h2o_q import site, data, ui

page = site['/demo']

n = 200
f = FakeCategoricalSeries()
v = page.add('example', ui.plot_card(
    box='1 1 4 5',
    title='Interval, helix',
    data=data('product price', n),
    plot=ui.plot([ui.mark(coord='helix', type='interval', x='=product', y='=price', y_min=0)])
))
v.data = [(c, x) for c, x, dx in [f.next() for _ in range(n)]]

page.save()
</code></pre>
<h2 id="plot-interval-annotation">Plot / Interval / Annotation</h2>
<p>Add annotations to a column plot.</p>
<pre><code class="py">from synth import FakeCategoricalSeries
from h2o_q import site, data, ui

page = site['/demo']

n = 20
f = FakeCategoricalSeries()
v = page.add('example', ui.plot_card(
    box='1 1 4 5',
    title='Categorical-Numeric',
    data=data('product price', n),
    plot=ui.plot([
        ui.mark(type='interval', x='=product', y='=price', y_min=0, y_max=100),
        ui.mark(x='C10', y=80, label='point'),
        ui.mark(x='C13', label='vertical line'),
        ui.mark(y=40, label='horizontal line'),
        ui.mark(x='C6', x0='C3', label='vertical region'),
        ui.mark(y=70, y0=60, label='horizontal region')
    ])
))
v.data = [(c, x) for c, x, dx in [f.next() for _ in range(n)]]

page.save()
</code></pre>
<h2 id="plot-interval-annotation-transpose">Plot / Interval / Annotation / Transpose</h2>
<p>Add annotations to a bar plot.</p>
<pre><code class="py">from synth import FakeCategoricalSeries
from h2o_q import site, data, ui

page = site['/demo']

n = 20
f = FakeCategoricalSeries()
v = page.add('example', ui.plot_card(
    box='1 1 4 5',
    title='Categorical-Numeric',
    data=data('product price', n),
    plot=ui.plot([
        ui.mark(type='interval', y='=product', x='=price', x_min=0, x_max=100),
        ui.mark(y='C10', x=80, label='point'),
        ui.mark(y='C13', label='vertical line'),
        ui.mark(x=40, label='horizontal line'),
        ui.mark(y='C6', y0='C3', label='vertical region'),
        ui.mark(x=70, x0=60, label='horizontal region')
    ])
))
v.data = [(c, x) for c, x, dx in [f.next() for _ in range(n)]]

page.save()
</code></pre>
<h2 id="plot-line">Plot / Line</h2>
<p>Make a line plot.</p>
<pre><code class="py">from synth import FakeTimeSeries
from h2o_q import site, data, ui

page = site['/demo']

n = 50
f = FakeTimeSeries()
v = page.add('example', ui.plot_card(
    box='1 1 4 5',
    title='Line',
    data=data('date price', n),
    plot=ui.plot([ui.mark(type='line', x_scale='time', x='=date', y='=price', y_min=0)])
))
v.data = [(t, x) for t, x, dx in [f.next() for _ in range(n)]]

page.save()
</code></pre>
<h2 id="plot-line-groups">Plot / Line / Groups</h2>
<p>Make a multi-series line plot.</p>
<pre><code class="py">from synth import FakeMultiTimeSeries
from h2o_q import site, data, ui

page = site['/demo']

n = 50
f = FakeMultiTimeSeries()
v = page.add('example', ui.plot_card(
    box='1 1 4 5',
    title='Line, groups',
    data=data('product date price', n * 5),
    plot=ui.plot([ui.mark(type='line', x_scale='time', x='=date', y='=price', color='=product', y_min=0)])
))

v.data = [(g, t, x) for x in [f.next() for _ in range(n)] for g, t, x, dx in x]

page.save()
</code></pre>
<h2 id="plot-line-smooth">Plot / Line / Smooth</h2>
<p>Make a line plot using a smooth curve.</p>
<pre><code class="py">from synth import FakeTimeSeries
from h2o_q import site, data, ui

page = site['/demo']

n = 50
f = FakeTimeSeries()
v = page.add('example', ui.plot_card(
    box='1 1 4 5',
    title='Line, smooth',
    data=data('date price', n),
    plot=ui.plot([ui.mark(type='line', x_scale='time', x='=date', y='=price', curve='smooth', y_min=0)])
))
v.data = [(t, x) for t, x, dx in [f.next() for _ in range(n)]]

page.save()
</code></pre>
<h2 id="plot-line-step">Plot / Line / Step</h2>
<p>Make a line plot with a step curve.</p>
<pre><code class="py">from synth import FakeTimeSeries
from h2o_q import site, data, ui

page = site['/demo']

n = 50
f = FakeTimeSeries()
v = page.add('example', ui.plot_card(
    box='1 1 4 5',
    title='Line, step',
    data=data('date price', n),
    plot=ui.plot([ui.mark(type='line', x_scale='time', x='=date', y='=price', curve='step', y_min=0)])
))

v.data = [(t, x) for t, x, dx in [f.next() for _ in range(n)]]

page.save()
</code></pre>
<h2 id="plot-line-step-after">Plot / Line / Step / After</h2>
<p>Make a line plot with a step-after curve.</p>
<pre><code class="py">from synth import FakeTimeSeries
from h2o_q import site, data, ui

page = site['/demo']

n = 50
f = FakeTimeSeries()
v = page.add('example', ui.plot_card(
    box='1 1 4 5',
    title='Line, step-right',
    data=data('date price', n),
    plot=ui.plot([ui.mark(type='line', x_scale='time', x='=date', y='=price', curve='step-after', y_min=0)])
))
v.data = [(t, x) for t, x, dx in [f.next() for _ in range(n)]]

page.save()
</code></pre>
<h2 id="plot-line-step-before">Plot / Line / Step / Before</h2>
<p>Make a line plot with a step-before curve.</p>
<pre><code class="py">from synth import FakeTimeSeries
from h2o_q import site, data, ui

page = site['/demo']

n = 50
f = FakeTimeSeries()
v = page.add('example', ui.plot_card(
    box='1 1 4 5',
    title='Line, step-left',
    data=data('date price', n),
    plot=ui.plot([ui.mark(type='line', x_scale='time', x='=date', y='=price', curve='step-before', y_min=0)])
))
v.data = [(t, x) for t, x, dx in [f.next() for _ in range(n)]]

page.save()
</code></pre>
<h2 id="plot-line-labels">Plot / Line / Labels</h2>
<p>Add labels to a line plot.</p>
<pre><code class="py">from synth import FakeTimeSeries
from h2o_q import site, data, ui

page = site['/demo']

n = 50
f = FakeTimeSeries()
v = page.add('example', ui.plot_card(
    box='1 1 4 5',
    title='Labels',
    data=data('date price', n),
    plot=ui.plot([ui.mark(type='line', x_scale='time', x='=date', y='=price', y_min=0,
                          label='=${{intl price minimum_fraction_digits=2 maximum_fraction_digits=2}}')])
))
v.data = [(t, x) for t, x, dx in [f.next() for _ in range(n)]]

page.save()
</code></pre>
<h2 id="plot-line-labels-stroked">Plot / Line / Labels/ Stroked</h2>
<p>Customize label rendering: add a subtle outline to labels to improve readability.</p>
<pre><code class="py">from synth import FakeTimeSeries
from h2o_q import site, data, ui

page = site['/demo']

n = 50
f = FakeTimeSeries()
v = page.add('example', ui.plot_card(
    box='1 1 4 5',
    title='Labels, less messy',
    data=data('date price', n),
    plot=ui.plot([ui.mark(type='line', x_scale='time', x='=date', y='=price', y_min=0,
                          label='=${{intl price minimum_fraction_digits=2 maximum_fraction_digits=2}}',
                          label_fill_color='rgba(0,0,0,0.65)', label_stroke_color='#fff', label_stroke_size=2)])
))
v.data = [(t, x) for t, x, dx in [f.next() for _ in range(n)]]

page.save()
</code></pre>
<h2 id="plot-line-labels-occlusion">Plot / Line / Labels / Occlusion</h2>
<p>Make a line plot with non-overlapping labels.</p>
<pre><code class="py">from synth import FakeTimeSeries
from h2o_q import site, data, ui

page = site['/demo']

n = 50
f = FakeTimeSeries()
v = page.add('example', ui.plot_card(
    box='1 1 4 5',
    title='Remove overlapping labels',
    data=data('date price', n),
    plot=ui.plot([ui.mark(type='line', x_scale='time', x='=date', y='=price', y_min=0,
                          label='=${{intl price minimum_fraction_digits=2 maximum_fraction_digits=2}}',
                          label_overlap='hide')])
))
v.data = [(t, x) for t, x, dx in [f.next() for _ in range(n)]]

page.save()
</code></pre>
<h2 id="plot-line-annotation">Plot / Line / Annotation</h2>
<p>Add annotations to a line plot.</p>
<pre><code class="py">from synth import FakeTimeSeries
from h2o_q import site, data, ui

page = site['/demo']

n = 50
f = FakeTimeSeries()
v = page.add('example', ui.plot_card(
    box='1 1 4 5',
    title='Time-Numeric',
    data=data('date price', n),
    plot=ui.plot([
        ui.mark(type='line', x_scale='time', x='=date', y='=price', y_min=0, y_max=100),
        ui.mark(x=50, y=50, label='point'),
        ui.mark(x='2010-05-15T19:59:21.000000Z', label='vertical line'),
        ui.mark(y=40, label='horizontal line'),
        ui.mark(x='2010-05-24T19:59:21.000000Z', x0='2010-05-20T19:59:21.000000Z', label='vertical region'),
        ui.mark(y=70, y0=60, label='horizontal region'),
        ui.mark(x='2010-05-10T19:59:21.000000Z', x0='2010-05-05T19:59:21.000000Z', y=30, y0=20,
                label='rectangular region')
    ])
))
v.data = [(t, x) for t, x, dx in [f.next() for _ in range(n)]]

page.save()
</code></pre>
<h2 id="plot-path">Plot / Path</h2>
<p>Make a path plot.</p>
<pre><code class="py">from synth import FakeScatter
from h2o_q import site, data, ui

page = site['/demo']

n = 50
f = FakeScatter()
v = page.add('example', ui.plot_card(
    box='1 1 4 5',
    title='Path',
    data=data('profit sales', n),
    plot=ui.plot([ui.mark(type='path', x='=profit', y='=sales')])
))
v.data = [(x, y) for x, y in [f.next() for _ in range(n)]]

page.save()
</code></pre>
<h2 id="plot-path-point">Plot / Path / Point</h2>
<p>Make a path plot with an additional layer of points.</p>
<pre><code class="py">from synth import FakeScatter
from h2o_q import site, data, ui

page = site['/demo']

n = 50
f = FakeScatter()
v = page.add('example', ui.plot_card(
    box='1 1 4 5',
    title='Path + Point',
    data=data('profit sales', n),
    plot=ui.plot([
        ui.mark(type='path', x='=profit', y='=sales'),
        ui.mark(type='point', x='=profit', y='=sales'),
    ])
))
v.data = [(x, y) for x, y in [f.next() for _ in range(n)]]

page.save()
</code></pre>
<h2 id="plot-path-smooth">Plot / Path / Smooth</h2>
<p>Make a path plot with a smooth curve.</p>
<pre><code class="py">from synth import FakeScatter
from h2o_q import site, data, ui

page = site['/demo']

n = 50
f = FakeScatter()
v = page.add('example', ui.plot_card(
    box='1 1 4 5',
    title='Path, smooth',
    data=data('profit sales', n),
    plot=ui.plot([ui.mark(type='path', x='=profit', y='=sales', curve='smooth')])
))
v.data = [(x, y) for x, y in [f.next() for _ in range(n)]]

page.save()
</code></pre>
<h2 id="plot-area">Plot / Area</h2>
<p>Make an area plot.</p>
<pre><code class="py">from synth import FakeTimeSeries
from h2o_q import site, data, ui

page = site['/demo']

n = 50
f = FakeTimeSeries()
v = page.add('example', ui.plot_card(
    box='1 1 4 5',
    title='Area',
    data=data('date price', n),
    plot=ui.plot([ui.mark(type='area', x_scale='time', x='=date', y='=price', y_min=0)])
))
v.data = [(t, x) for t, x, dx in [f.next() for _ in range(n)]]

page.save()
</code></pre>
<h2 id="plot-area-groups">Plot / Area / Groups</h2>
<p>Make an area plot showing multiple categories.</p>
<pre><code class="py">from synth import FakeMultiTimeSeries
from h2o_q import site, data, ui

page = site['/demo']

n = 50
f = FakeMultiTimeSeries()
v = page.add('example', ui.plot_card(
    box='1 1 4 5',
    title='Area, groups',
    data=data('product date price', n * 5),
    plot=ui.plot([ui.mark(type='area', x_scale='time', x='=date', y='=price', color='=product', y_min=0)])
))

v.data = [(g, t, x) for x in [f.next() for _ in range(n)] for g, t, x, dx in x]

page.save()
</code></pre>
<h2 id="plot-area-negative">Plot / Area / Negative</h2>
<p>Make an area plot showing positive and negative values.</p>
<pre><code class="py">from synth import FakeTimeSeries
from h2o_q import site, data, ui

page = site['/demo']

n = 50
f = FakeTimeSeries(min=-50, max=50, start=0)
v = page.add('example', ui.plot_card(
    box='1 1 4 5',
    title='Area, negative values',
    data=data('date price', n),
    plot=ui.plot([ui.mark(type='area', x_scale='time', x='=date', y='=price')])
))
v.data = [(t, x) for t, x, dx in [f.next() for _ in range(n)]]

page.save()
</code></pre>
<h2 id="plot-area-range">Plot / Area / Range</h2>
<p>Make an area plot representing a range (band) of values.</p>
<pre><code class="py">import random

from synth import FakeTimeSeries
from h2o_q import site, data, ui

page = site['/demo']

n = 50
f = FakeTimeSeries()
v = page.add('example', ui.plot_card(
    box='1 1 4 5',
    title='Area, range',
    data=data('date low high', n),
    plot=ui.plot([ui.mark(type='area', x_scale='time', x='=date', y0='=low', y='=high')])
))
v.data = [(t, x - random.randint(3, 8), x + random.randint(3, 8)) for t, x, dx in [f.next() for _ in range(n)]]

page.save()
</code></pre>
<h2 id="plot-area-smooth">Plot / Area / Smooth</h2>
<p>Make an area plot with a smooth curve.</p>
<pre><code class="py">from synth import FakeTimeSeries
from h2o_q import site, data, ui

page = site['/demo']

n = 50
f = FakeTimeSeries()
v = page.add('example', ui.plot_card(
    box='1 1 4 5',
    title='Area, smooth',
    data=data('date price', n),
    plot=ui.plot([ui.mark(type='area', x_scale='time', x='=date', y='=price', curve='smooth', y_min=0)])
))
v.data = [(t, x) for t, x, dx in [f.next() for _ in range(n)]]

page.save()
</code></pre>
<h2 id="plot-area-stacked">Plot / Area / Stacked</h2>
<p>Make a stacked area plot.</p>
<pre><code class="py">from synth import FakeMultiTimeSeries
from h2o_q import site, data, ui

page = site['/demo']

n = 50
f = FakeMultiTimeSeries()
v = page.add('example', ui.plot_card(
    box='1 1 4 5',
    title='Area, stacked',
    data=data('product date price', n * 5),
    plot=ui.plot(
        [ui.mark(type='area', x_scale='time', x='=date', y='=price', color='=product', stack='auto', y_min=0)])
))

v.data = [(g, t, x) for x in [f.next() for _ in range(n)] for g, t, x, dx in x]

page.save()
</code></pre>
<h2 id="plot-area-line">Plot / Area + Line</h2>
<p>Make an area plot with an additional line layer on top.</p>
<pre><code class="py">from synth import FakeTimeSeries
from h2o_q import site, data, ui

page = site['/demo']

n = 50
f = FakeTimeSeries()
v = page.add('example', ui.plot_card(
    box='1 1 4 5',
    title='Area + Line',
    data=data('date price', n),
    plot=ui.plot([
        ui.mark(type='area', x_scale='time', x='=date', y='=price', y_min=0),
        ui.mark(type='line', x='=date', y='=price')
    ])
))
v.data = [(t, x) for t, x, dx in [f.next() for _ in range(n)]]

page.save()
</code></pre>
<h2 id="plot-area-line-smooth">Plot / Area + Line / Smooth</h2>
<p>Make a combined area + line plot using a smooth curve.</p>
<pre><code class="py">from synth import FakeTimeSeries
from h2o_q import site, data, ui

page = site['/demo']

n = 50
f = FakeTimeSeries()
v = page.add('example', ui.plot_card(
    box='1 1 4 5',
    title='Area + Line, smooth',
    data=data('date price', n),
    plot=ui.plot([
        ui.mark(type='area', x_scale='time', x='=date', y='=price', curve='smooth', y_min=0),
        ui.mark(type='line', x='=date', y='=price', curve='smooth')
    ])
))
v.data = [(t, x) for t, x, dx in [f.next() for _ in range(n)]]

page.save()
</code></pre>
<h2 id="plot-area-line-groups">Plot / Area + Line / Groups</h2>
<p>Make an combined area + line plot showing multiple categories.</p>
<pre><code class="py">from synth import FakeMultiTimeSeries
from h2o_q import site, data, ui

page = site['/demo']

n = 50
f = FakeMultiTimeSeries()
v = page.add('example', ui.plot_card(
    box='1 1 4 5',
    title='Area + Line, groups',
    data=data('product date price', n * 5),
    plot=ui.plot([
        ui.mark(type='area', x_scale='time', x='=date', y='=price', color='=product', y_min=0),
        ui.mark(type='line', x='=date', y='=price', color='=product')
    ])
))

v.data = [(g, t, x) for x in [f.next() for _ in range(n)] for g, t, x, dx in x]

page.save()
</code></pre>
<h2 id="plot-polygon">Plot / Polygon</h2>
<p>Make a heatmap.</p>
<pre><code class="py">from synth import FakeSeries
from h2o_q import site, data, ui

page = site['/demo']

k1, k2 = 20, 10
f = FakeSeries()
v = page.add('example', ui.plot_card(
    box='1 1 4 5',
    title='Heatmap',
    data=data('country product profit', k1 * k2),
    plot=ui.plot([
        ui.mark(type='polygon', x='=country', y='=product', color='=profit',
                color_range='#fee8c8 #fdbb84 #e34a33')])
))
rows = []
for i in range(k1):
    for j in range(k2):
        x, dx = f.next()
        rows.append((f'A{i + 1}', f'B{j + 1}', x))
v.data = rows

page.save()
</code></pre>
<h2 id="plot-histogram">Plot / Histogram</h2>
<p>Make a histogram.</p>
<pre><code class="py">from synth import FakeCategoricalSeries
from h2o_q import site, data, ui

page = site['/demo']

n = 10
f = FakeCategoricalSeries()
v = page.add('example', ui.plot_card(
    box='1 1 4 5',
    title='Histogram',
    data=data('lo hi price', n),
    plot=ui.plot([ui.mark(type='interval', y='=price', x1='=lo', x2='=hi', y_min=0)])
))
v.data = [(i * 10, i * 10 + 10, x) for i, (c, x, dx) in enumerate([f.next() for _ in range(n)])]

page.save()
</code></pre>
<h2 id="plot-axis-titles">Plot / Axis Titles</h2>
<p>Display custom axis titles on a plot.</p>
<pre><code class="py">from synth import FakeTimeSeries
from h2o_q import site, data, ui

page = site['/demo']

n = 50
f = FakeTimeSeries()
v = page.add('example', ui.plot_card(
    box='1 1 4 5',
    title='Line',
    data=data('date price', n),
    plot=ui.plot(
        [ui.mark(type='line', x_scale='time', x='=date', y='=price', y_min=0, x_title='Date', y_title='Price')])
))
v.data = [(t, x) for t, x, dx in [f.next() for _ in range(n)]]

page.save()
</code></pre>
<h2 id="plot-form">Plot / Form</h2>
<p>Display a plot inside a form.</p>
<pre><code class="py">from synth import FakeCategoricalSeries
from h2o_q import site, data, ui

page = site['/demo']

n = 20
f = FakeCategoricalSeries()
v = page.add('example', ui.form_card(
    box='1 1 4 5',
    items=[
        ui.text_xl('Example 1'),
        ui.visualization(
            plot=ui.plot([ui.mark(type='interval', x='=product', y='=price', y_min=0)]),
            data=data(fields='product price', rows=[(c, x) for c, x, _ in [f.next() for _ in range(n)]], pack=True),
        ),
        ui.text_xl('Example 2'),
        ui.visualization(
            plot=ui.plot([ui.mark(type='interval', x='=product', y='=price', y_min=0)]),
            data=data(fields='product price', rows=[(c, x) for c, x, _ in [f.next() for _ in range(n)]], pack=True),
        ),
    ],
))

page.save()
</code></pre>
<h2 id="plot-vega-lite">Plot / Vega-lite</h2>
<p>Make a plot using Vega-lite.</p>
<pre><code class="py">from h2o_q import site, data, ui

page = site['/demo']

spec1 = '''
{
  &quot;description&quot;: &quot;A simple bar plot with embedded data.&quot;,
  &quot;data&quot;: {
    &quot;values&quot;: [
      {&quot;a&quot;: &quot;A&quot;,&quot;b&quot;: 28}, {&quot;a&quot;: &quot;B&quot;,&quot;b&quot;: 55}, {&quot;a&quot;: &quot;C&quot;,&quot;b&quot;: 43},
      {&quot;a&quot;: &quot;D&quot;,&quot;b&quot;: 91}, {&quot;a&quot;: &quot;E&quot;,&quot;b&quot;: 81}, {&quot;a&quot;: &quot;F&quot;,&quot;b&quot;: 53},
      {&quot;a&quot;: &quot;G&quot;,&quot;b&quot;: 19}, {&quot;a&quot;: &quot;H&quot;,&quot;b&quot;: 87}, {&quot;a&quot;: &quot;I&quot;,&quot;b&quot;: 52}
    ]
  },
  &quot;mark&quot;: &quot;bar&quot;,
  &quot;encoding&quot;: {
    &quot;x&quot;: {&quot;field&quot;: &quot;a&quot;, &quot;type&quot;: &quot;ordinal&quot;},
    &quot;y&quot;: {&quot;field&quot;: &quot;b&quot;, &quot;type&quot;: &quot;quantitative&quot;}
  }
}
'''

page.add('embedded', ui.vega_card(
    box='1 1 2 4',
    title='Plot with embedded data',
    specification=spec1,
))

# The following produces the same plot as above, but separates the
# Vega-lite spec from the data. This allows you to create a plot once
# and update data multiple times.
spec2 = '''
{
  &quot;description&quot;: &quot;A simple bar plot with embedded data.&quot;,
  &quot;mark&quot;: &quot;bar&quot;,
  &quot;encoding&quot;: {
    &quot;x&quot;: {&quot;field&quot;: &quot;a&quot;, &quot;type&quot;: &quot;ordinal&quot;},
    &quot;y&quot;: {&quot;field&quot;: &quot;b&quot;, &quot;type&quot;: &quot;quantitative&quot;}
  }
}
'''

data2 = data(fields=[&quot;a&quot;, &quot;b&quot;], rows=[
    [&quot;A&quot;, 28], [&quot;B&quot;, 55], [&quot;C&quot;, 43],
    [&quot;D&quot;, 91], [&quot;E&quot;, 81], [&quot;F&quot;, 53],
    [&quot;G&quot;, 19], [&quot;H&quot;, 87], [&quot;I&quot;, 52]
])

page.add('external', ui.vega_card(
    box='1 5 2 4',
    title='Plot with external data',
    specification=spec2,
    data=data2,
))

page.save()
</code></pre>
<h2 id="plot-vega-lite-update">Plot / Vega-lite / Update</h2>
<p>Periodically update a Vega-lite plot.</p>
<pre><code class="py">from h2o_q import site, data, ui
import random
import time

page = site['/demo']

spec = '''
{
  &quot;description&quot;: &quot;A simple bar plot with embedded data.&quot;,
  &quot;mark&quot;: &quot;bar&quot;,
  &quot;encoding&quot;: {
    &quot;x&quot;: {&quot;field&quot;: &quot;a&quot;, &quot;type&quot;: &quot;ordinal&quot;},
    &quot;y&quot;: {&quot;field&quot;: &quot;b&quot;, &quot;type&quot;: &quot;quantitative&quot;}
  }
}
'''


# Generate random datum between 1 and 100
def rnd(): return random.randint(1, 100)


# Get data rows for our plot.
# Typically, this data would be read from some external data source.
def poll():
    return [
        [&quot;A&quot;, rnd()], [&quot;B&quot;, rnd()], [&quot;C&quot;, rnd()],
        [&quot;D&quot;, rnd()], [&quot;E&quot;, rnd()], [&quot;F&quot;, rnd()],
        [&quot;G&quot;, rnd()], [&quot;H&quot;, rnd()], [&quot;I&quot;, rnd()]
    ]


vis = page.add('external', ui.vega_card(
    box='1 1 2 4',
    title='Plot with external data',
    specification=spec,
    data=data(fields=[&quot;a&quot;, &quot;b&quot;], rows=poll()),
))

page.save()

while True:
    time.sleep(1)
    # Update the plot's data rows
    vis.data = poll()
    page.save()
</code></pre>
<h2 id="plot-vega-lite-form">Plot / Vega-lite / Form</h2>
<p>Display a Vega-lite plot inside a form card</p>
<pre><code class="py">from h2o_q import site, data, ui
import random
import time

page = site['/demo']

spec = '''
{
  &quot;description&quot;: &quot;A simple bar plot with embedded data.&quot;,
  &quot;mark&quot;: &quot;bar&quot;,
  &quot;encoding&quot;: {
    &quot;x&quot;: {&quot;field&quot;: &quot;a&quot;, &quot;type&quot;: &quot;ordinal&quot;},
    &quot;y&quot;: {&quot;field&quot;: &quot;b&quot;, &quot;type&quot;: &quot;quantitative&quot;}
  }
}
'''


# Get data rows for our plot.
# Typically, this data would be read from some external data source.
def poll():
    return [
        [&quot;A&quot;, rnd()], [&quot;B&quot;, rnd()], [&quot;C&quot;, rnd()],
        [&quot;D&quot;, rnd()], [&quot;E&quot;, rnd()], [&quot;F&quot;, rnd()],
        [&quot;G&quot;, rnd()], [&quot;H&quot;, rnd()], [&quot;I&quot;, rnd()]
    ]


# Generate random datum between 1 and 100
def rnd(): return random.randint(1, 100)


page['example'] = ui.form_card(
    box='1 1 2 -1',
    items=[
        ui.text_xl('Example 1'),
        ui.vega_visualization(
            specification=spec,
            data=data(fields=[&quot;a&quot;, &quot;b&quot;], rows=poll(), pack=True),
        ),
        ui.text_xl('Example 2'),
        ui.vega_visualization(
            specification=spec,
            data=data(fields=[&quot;a&quot;, &quot;b&quot;], rows=poll(), pack=True),
        ),
        ui.text_xl('Example 3'),
        ui.vega_visualization(
            specification=spec,
            data=data(fields=[&quot;a&quot;, &quot;b&quot;], rows=poll(), pack=True),
        ),
    ],
)

page.save()
</code></pre>
<h2 id="plot-altair">Plot / Altair</h2>
<p>Use Altair to create plot specifications for the Vega card.</p>
<pre><code class="py">import altair
from vega_datasets import data
from h2o_q import site, ui

spec = altair.Chart(data.cars()).mark_circle(size=60).encode(
    x='Horsepower',
    y='Miles_per_Gallon',
    color='Origin',
    tooltip=['Name', 'Origin', 'Horsepower', 'Miles_per_Gallon']
).interactive().to_json()

page = site['/demo']

page['example'] = ui.vega_card(
    box='1 1 4 5',
    title='Altair Example',
    specification=spec,
)

page.save()
</code></pre>
<h2 id="plot-bokeh">Plot / Bokeh</h2>
<p>Use Bokeh to create plots.</p>
<pre><code class="py">import numpy as np
from bokeh.models import HoverTool
from bokeh.plotting import figure
from bokeh.resources import CDN
from bokeh.embed import file_html

from h2o_q import site, ui

n = 500
x = 2 + 2 * np.random.standard_normal(n)
y = 2 + 2 * np.random.standard_normal(n)
p = figure(
    match_aspect=True,
    tools=&quot;wheel_zoom,reset&quot;,
    background_fill_color='#440154'
)
p.grid.visible = False
r, bins = p.hexbin(x, y, size=0.5, hover_color=&quot;pink&quot;, hover_alpha=0.8)
p.circle(x, y, color=&quot;white&quot;, size=1)
p.add_tools(HoverTool(
    tooltips=[(&quot;count&quot;, &quot;@c&quot;), (&quot;(q,r)&quot;, &quot;(@q, @r)&quot;)],
    mode=&quot;mouse&quot;,
    point_policy=&quot;follow_mouse&quot;,
    renderers=[r]
))

# Export html for our frame card
html = file_html(p, CDN, &quot;plot&quot;)

page = site['/demo']
page['example'] = ui.frame_card(
    box='1 1 5 8',
    title='Hexbin for 500 points',
    content=html,
)
page.save()
</code></pre>
<h2 id="plot-matplotlib">Plot / Matplotlib</h2>
<p>Use matplotlib to create plots. Also demonstrates how to provide live control over plots.</p>
<pre><code class="py">import uuid
import os
import numpy as np
import matplotlib.pyplot as plt

from h2o_q import ui, listen, Q

np.random.seed(19680801)


async def main(q: Q):
    if not q.client.initialized:  # First visit
        q.client.initialized = True
        q.client.points = 25
        q.client.alpha = 50

        q.page['controls'] = ui.form_card(
            box='1 1 2 3',
            items=[
                ui.text_xl(&quot;Lets make some plots&quot;),
                ui.slider(name='points', label='Points', min=5, max=50, step=1, value=q.client.points, trigger=True),
                ui.slider(name='alpha', label='Alpha', min=5, max=100, step=1, value=q.client.alpha, trigger=True),
            ]
        )
        q.page['plot'] = ui.markdown_card(box='3 1 2 3', title='Your plot!', content='')

    if q.args.points:
        q.client.points = q.args.points

    if q.args.alpha:
        q.client.alpha = q.args.alpha

    n = q.client.points

    # Render plot
    plt.figure(figsize=(2, 2))
    plt.scatter(
        np.random.rand(n), np.random.rand(n),
        s=(30 * np.random.rand(n)) ** 2,
        c=np.random.rand(n),
        alpha=q.client.alpha / 100.0
    )
    image_filename = f'{str(uuid.uuid4())}.png'
    plt.savefig(image_filename)

    # Upload
    image_path, = await q.site.upload([image_filename])

    # Clean up
    os.remove(image_filename)

    # Display our plot in our markdown card
    q.page['plot'].content = f'![plot]({image_path})'

    # Save page
    await q.page.save()


listen('/demo', main)
</code></pre>
<h2 id="plot-plotly">Plot / Plotly</h2>
<p>Use plotly to create plots. Also demonstrates how to provide live control over plots.</p>
<pre><code class="py">import numpy as np
from plotly import graph_objects as go
from plotly import io as pio

from h2o_q import ui, listen, Q

np.random.seed(19680801)


async def main(q: Q):
    if not q.client.initialized:  # First visit
        q.client.initialized = True
        q.client.points = 25
        q.client.plotly_controls = False

        q.page['controls'] = ui.form_card(
            box='1 1 4 2',
            items=[
                ui.text_xl(&quot;Lets make some interactive plots with plotly&quot;),
                ui.slider(name='points', label='Points', min=5, max=50, step=1, value=q.client.points, trigger=True),
                ui.toggle(name='plotly_controls', label='Plotly Controls', trigger=True),
            ]
        )
        q.page['plot'] = ui.frame_card(box='1 3 4 5', title='', content='')

    if q.args.points:
        q.client.points = q.args.points

    if q.args.plotly_controls is not None:
        q.client.plotly_controls = q.args.plotly_controls

    n = q.client.points

    # Create plot with plotly
    fig = go.Figure(data=go.Scatter(
        x=np.random.rand(n),
        y=np.random.rand(n),
        mode='markers',
        marker=dict(size=(8 * np.random.rand(n)) ** 2,
                    color=np.random.rand(n)),
        opacity=0.8,
    ))
    _ = fig.update_layout(
        width=4 * 134 - 10,
        height=5 * 76 - 10,
        margin=dict(l=10, r=10, t=10, b=10),
        paper_bgcolor='rgb(255, 255, 255)',
        plot_bgcolor='rgb(255, 255, 255)',
    )
    config = {'scrollZoom': q.client.plotly_controls,
              'showLink': q.client.plotly_controls,
              'displayModeBar': q.client.plotly_controls}
    html = pio.to_html(fig, validate=False, include_plotlyjs='cdn', config=config)

    q.page['plot'].content = html

    # Save page
    await q.page.save()


listen('/demo', main)
</code></pre>
<h2 id="plot-d3js">Plot / D3.js</h2>
<p>Create custom plots using D3.js.</p>
<pre><code class="py">import json
import os.path
from h2o_q import site, ui

# The example D3 Javascript file is located in the same directory as this example; get its path
d3_js_script_filename = os.path.join(os.path.dirname(__file__), 'plot_d3.js')

# Upload the script to the server. Typically, you'd do this only once, when your app is installed.
d3_js_script_path, = site.upload([d3_js_script_filename])

html_template = '''
&lt;!DOCTYPE html&gt;
&lt;html&gt;
&lt;head&gt;
  &lt;script src=&quot;https://d3js.org/d3.v5.min.js&quot;&gt;&lt;/script&gt;
&lt;/head&gt;
&lt;body style=&quot;margin:0; padding:0&quot;&gt;
  &lt;script src=&quot;{script_path}&quot;&gt;&lt;/script&gt;
  &lt;script&gt;render({data})&lt;/script&gt;
&lt;/body&gt;
&lt;/html&gt;
'''

# This data is hard-coded here for simplicity.
# During production use, this data would be the output of some compute routine.
data = [
    [11975, 5871, 8916, 2868],
    [1951, 10048, 2060, 6171],
    [8010, 16145, 8090, 8045],
    [1013, 990, 940, 6907],
]

# Plug JSON-serialized data into our html template
html = html_template.format(script_path=d3_js_script_path, data=json.dumps(data))

page = site['/demo']
page['example'] = ui.frame_card(
    box='1 1 5 8',
    title='D3 Chord Diagram',
    content=html,
)
page.save()
</code></pre>
<h2 id="pixel-art">Pixel Art</h2>
<p>A card that demonstrates collaborative editing in Q.
<a href="/demo">Open this link</a> in multiple browsers and watch them synchronize in realtime.</p>
<pre><code class="py">from h2o_q import site, data, ui

page = site['/demo']
page.drop()

page.add('example', ui.pixel_art_card(
    box='1 1 4 6',
    title='Art',
    data=data('color', 16 * 16),
))
page.save()
</code></pre>
<h2 id="uploads">Uploads</h2>
<p>Upload files to the Q server.</p>
<pre><code class="py">import os
from h2o_q import site, ui


def write_csv(filename, rows):
    with open(filename, 'w') as f:
        f.write('\n'.join([','.join([str(x) for x in row]) for row in rows]))


# Create a couple of fake CSV files
write_csv('squares.csv', [[x, x * x] for x in range(1, 11)])
write_csv('cubes.csv', [[x, x * x * x] for x in range(1, 11)])

# Upload CSVs
squares_path, cubes_path = site.upload(['squares.csv', 'cubes.csv'])

# Delete local CSVs
os.remove('squares.csv')
os.remove('cubes.csv')

# Display links to these CSVs
page = site['/demo']
page['example'] = ui.markdown_card(
    box='1 1 2 2',
    title='Download CSVs',
    content=f'[Squares]({squares_path}) [Cubes]({cubes_path})',
)
page.save()
</code></pre>
<h2 id="uploads-async">Uploads / Async</h2>
<p>Upload files from an interactive app.</p>
<pre><code class="py">import os
from h2o_q import Q, listen, ui


def write_csv(filename, rows):
    with open(filename, 'w') as f:
        f.write('\n'.join([','.join([str(x) for x in row]) for row in rows]))


async def main(q: Q):
    if q.args.generate_csv:
        # Generate
        write_csv('squares.csv', [[x, x * x] for x in range(1, 1 + q.args.row_count)])
        # Upload
        download_path, = await q.site.upload(['squares.csv'])
        # Clean up
        os.remove('squares.csv')

        # Display link
        q.page['example'].items = [
            ui.text_xl('Squares Generated!'),
            ui.text(f'[Download my {q.args.row_count} squares!]({download_path})'),
            ui.button(name='show_form', label='Back', primary=True),
        ]
    else:
        # Accept a row count from the user
        q.page['example'] = ui.form_card(box='1 1 4 10', items=[
            ui.text_xl('Square Generator'),
            ui.slider(name='row_count', label='Squares to generate', min=0, max=100, step=10, value=30),
            ui.button(name='generate_csv', label='Generate', primary=True),
        ])
    await q.page.save()


if __name__ == '__main__':
    listen('/demo', main)
</code></pre>
<h2 id="uploads-ui">Uploads / UI</h2>
<p>Accept files from the user.</p>
<pre><code class="py">import os
from h2o_q import Q, listen, ui
import os.path


def make_link_list(links):
    # Make a markdown list of links.
    return '\n'.join([f'- [{os.path.basename(link)}]({link})' for link in links])


async def main(q: Q):
    if q.args.user_files:
        q.page['example'].items = [
            ui.text_xl('Files uploaded!'),
            ui.text(make_link_list(q.args.user_files)),
            ui.button(name='back', label='Back', primary=True),
        ]
    else:
        q.page['example'] = ui.form_card(box='1 1 4 10', items=[
            ui.text_xl('Upload some files'),
            ui.file_upload(name='user_files', label='Upload', multiple=True),
        ])
    await q.page.save()


if __name__ == '__main__':
    listen('/demo', main)
</code></pre>
<h2 id="uploads-ui_1">Uploads / UI</h2>
<p>Accept files from the user and downloads them locally.</p>
<pre><code class="py">import os
import os.path
from h2o_q import Q, listen, ui

async def main(q: Q):
    links = q.args.user_files
    if links:
        items = [ui.text_xl('Files uploaded!')]
        for link in links:
            local_path = await q.site.download(link, '.')
            #
            # The file is now available locally; process the file.
            # To keep this example simple, we just read the file size.
            #
            size = os.path.getsize(local_path)

            items.append(ui.link(label=f'{os.path.basename(link)} ({size} bytes)', download=True, path=link))
            # Clean up
            os.remove(local_path)

        items.append(ui.button(name='back', label='Back', primary=True))
        q.page['example'].items = items
    else:
        q.page['example'] = ui.form_card(box='1 1 4 10', items=[
            ui.text_xl('Upload some files'),
            ui.file_upload(name='user_files', label='Upload', multiple=True),
        ])
    await q.page.save()


if __name__ == '__main__':
    listen('/demo', main)
</code></pre>
<h2 id="meta-title">Meta / Title</h2>
<p>Set the browser window title for a page</p>
<pre><code class="py">from h2o_q import site, ui

page = site['/demo']

page['meta'] = ui.meta_card(box='', title='And now for something completely different!')

page['example'] = ui.markdown_card(
    box='1 1 2 2',
    title='',
    content='&lt;a href=&quot;/demo&quot; target=&quot;_blank&quot;&gt;Open this page in a new window&lt;/a&gt; to view its title.',
)

page.save()
</code></pre>
<h2 id="meta-notification">Meta / Notification</h2>
<p>Display a desktop notification.</p>
<pre><code class="py">import time

from h2o_q import site, ui

page = site['/demo']

page['meta'] = ui.meta_card(box='')

page['example'] = ui.markdown_card(
    box='1 1 2 2',
    title='Desktop Notifications',
    content='This page should display a desktop notification in a few seconds. Wait for it...',
)
page.save()

time.sleep(5)
page['meta'].notification = 'And now for something completely different!'

page.save()
</code></pre>
<h2 id="meta-refresh">Meta / Refresh</h2>
<p>Turn off live updates for static pages to conserve server resources.</p>
<pre><code class="py">from h2o_q import site, ui

page = site['/demo']

# Set refresh rate to zero (&quot;no updates&quot;)
page['meta'] = ui.meta_card(box='', refresh=0)

page['example'] = ui.markdown_card(
    box='1 1 2 2',
    title='No updates for you',
    content='This page stops receiving updates once loaded.',
)

page.save()
</code></pre>
<h2 id="mode-broadcast-global">Mode / Broadcast / Global</h2>
<p>Launch the server in broadcast mode to synchronize browser state across users. Global variables can be used to manage state.
<a href="/demo">Open this link</a> in multiple browsers and watch them synchronize in realtime.</p>
<pre><code class="py">from h2o_q import Q, listen, ui, pack

count = 0


async def main(q: Q):
    global count
    if 'increment' in q.args:
        count += 1

    items = pack([ui.button(name='increment', label=f'Count={count}')])

    if count &gt; 0:
        form = q.page['example']
        form.items = items
    else:
        q.page['example'] = ui.form_card(box='1 1 12 10', items=items)

    await q.page.save()


if __name__ == '__main__':
    listen('/demo', main, mode='broadcast')
</code></pre>
<h2 id="mode-broadcast">Mode / Broadcast</h2>
<p>Launch the server in broadcast mode to synchronize browser state across users.
<a href="/demo">Open this link</a> in multiple browsers and watch them synchronize in realtime.</p>
<pre><code class="py">from h2o_q import Q, listen, ui, pack


async def main(q: Q):
    count = q.app.count or 0
    if 'increment' in q.args:
        count += 1
        q.app.count = count

    items = pack([ui.button(name='increment', label=f'Count={count}')])

    if count &gt; 0:
        form = q.page['example']
        form.items = items
    else:
        q.page['example'] = ui.form_card(box='1 1 12 10', items=items)

    await q.page.save()


if __name__ == '__main__':
    listen('/demo', main, mode='broadcast')
</code></pre>
<h2 id="mode-multicast">Mode / Multicast</h2>
<p>Launch the server in multicast mode to synchronize browser state across a user's clients.
<a href="/demo">Open this link</a> in multiple browsers and watch them synchronize in realtime.</p>
<pre><code class="py">from h2o_q import Q, listen, ui, pack


async def main(q: Q):
    count = q.user.count or 0
    if 'increment' in q.args:
        count += 1
        q.user.count = count

    items = pack([ui.button(name='increment', label=f'Count={count}')])

    if count &gt; 0:
        form = q.page['example']
        form.items = items
    else:
        q.page['example'] = ui.form_card(box='1 1 12 10', items=items)

    await q.page.save()


if __name__ == '__main__':
    listen('/demo', main, mode='multicast')
</code></pre>
<h2 id="mode-unicast">Mode / Unicast</h2>
<p>Launch the server in unicast mode and use <code>q.client</code> to manage client-local state.</p>
<pre><code class="py">from h2o_q import Q, listen, ui, pack


async def main(q: Q):
    count = q.client.count or 0
    if 'increment' in q.args:
        count += 1
        q.client.count = count

    items = pack([ui.button(name='increment', label=f'Count={count}')])

    if count &gt; 0:
        form = q.page['example']
        form.items = items
    else:
        q.page['example'] = ui.form_card(box='1 1 12 10', items=items)

    await q.page.save()


if __name__ == '__main__':
    listen('/demo', main)
</code></pre>
<h2 id="graphics-primitives">Graphics / Primitives</h2>
<p>Use the graphics module to render and update shapes.</p>
<pre><code class="py">from h2o_q import site, ui, graphics as g

# Create some shapes
arc = g.arc(r1=25, r2=50, a1=90, a2=180)
circle = g.circle(cx=25, cy=25, r=25)
ellipse = g.ellipse(cx=25, cy=25, rx=25, ry=20)
image = g.image(width=50, height=50, href='https://www.python.org/static/community_logos/python-powered-h-140x182.png')
line = g.line(x1=0, y1=0, x2=50, y2=50)
path = g.path(d='M 0,0 L 50,50 L 50,0 L 0,50 z')
path2 = g.path(d=g.p().M(0, 0).L(50, 50).L(50, 0).L(0, 50).z().d())  # same effect as above, but programmable.
path3 = g.p().M(0, 0).L(50, 50).L(50, 0).L(0, 50).z().path()  # same effect as above, but a tad more concise.
polygon = g.polygon(points='0,0 50,50 50,0 0,50')
polyline = g.polyline(points='0,0 50,50 50,0 0,50')
rect = g.rect(x=0, y=0, width=50, height=50)
rounded_rect = g.rect(x=0, y=0, width=50, height=50, rx=10)
text = g.text(x=0, y=48, text='Z', font_size='4em')

# Collect 'em all
shapes = [arc, circle, ellipse, image, line, path, path2, path3, polygon, polyline, rect, rounded_rect, text]

# Apply fill/stroke for each shape
for shape in shapes:
    shape.fill = 'none' if g.type_of(shape) == 'polyline' else 'crimson'
    shape.stroke = 'darkred'
    shape.stroke_width = 5

# Lay out shapes vertically
y = 10
for shape in shapes:
    shape.transform = f'translate(10,{y})'
    y += 60

# Add shapes to the graphics card
page = site['/demo']
page['example'] = ui.graphics_card(
    box='1 1 1 10', view_box='0 0 70 800', width='100%', height='100%',
    stage=g.stage(
        arc=arc,
        circle=circle,
        ellipse=ellipse,
        image=image,
        line=line,
        path=path,
        path2=path2,
        path3=path3,
        polygon=polygon,
        polyline=polyline,
        rect=rect,
        rounded_rect=rounded_rect,
        text=text,
    ),
)

page.save()
</code></pre>
<h2 id="graphics-spline">Graphics / Spline</h2>
<p>Use the graphics module to render splines.</p>
<pre><code class="py">import random
from h2o_q import site, ui, graphics as g

x = [i * 20 for i in range(50)]
y = [
    88, 100, 116, 128, 126, 128, 118, 108, 121, 120, 99, 113, 117, 103, 98, 90, 104, 98, 82, 102, 104, 89, 87, 69,
    88, 97, 91, 105, 98, 86, 90, 107, 97, 107, 108, 128, 144, 148, 126, 106, 89, 99, 78, 70, 69, 64, 45, 29, 27, 38
]
y0 = [v - random.randint(5, min(y)) for v in y]

line_style = dict(fill='none', stroke='crimson', stroke_width=4)
area_style = dict(fill='crimson')

splines = [
    # Lines
    g.spline(x=x, y=y, **line_style),  # same as curve='linear'
    g.spline(x=x, y=y, curve='basis', **line_style),
    g.spline(x=x, y=y, curve='basis-closed', **line_style),
    g.spline(x=x, y=y, curve='basis-open', **line_style),
    g.spline(x=x, y=y, curve='cardinal', **line_style),
    g.spline(x=x, y=y, curve='cardinal-closed', **line_style),
    g.spline(x=x, y=y, curve='cardinal-open', **line_style),
    g.spline(x=x, y=y, curve='smooth', **line_style),
    g.spline(x=x, y=y, curve='smooth-closed', **line_style),
    g.spline(x=x, y=y, curve='smooth-open', **line_style),
    g.spline(x=x, y=y, curve='linear', **line_style),
    g.spline(x=x, y=y, curve='linear-closed', **line_style),
    g.spline(x=x, y=y, curve='monotone-x', **line_style),
    g.spline(x=x, y=y, curve='monotone-y', **line_style),
    g.spline(x=x, y=y, curve='natural', **line_style),
    g.spline(x=x, y=y, curve='step', **line_style),
    g.spline(x=x, y=y, curve='step-after', **line_style),
    g.spline(x=x, y=y, curve='step-before', **line_style),
    # Areas
    g.spline(x=x, y=y, y0=y0, **area_style),  # same as curve='linear'
    g.spline(x=x, y=y, y0=y0, curve='basis', **area_style),
    g.spline(x=x, y=y, y0=[], curve='basis', **area_style),
    g.spline(x=x, y=y, y0=y0, curve='basis-open', **area_style),
    g.spline(x=x, y=y, y0=y0, curve='cardinal', **area_style),
    g.spline(x=x, y=y, y0=[], curve='cardinal', **area_style),
    g.spline(x=x, y=y, y0=y0, curve='cardinal-open', **area_style),
    g.spline(x=x, y=y, y0=y0, curve='smooth', **area_style),
    g.spline(x=x, y=y, y0=[], curve='smooth', **area_style),
    g.spline(x=x, y=y, y0=y0, curve='smooth-open', **area_style),
    g.spline(x=x, y=y, y0=y0, curve='linear', **area_style),
    g.spline(x=x, y=y, y0=[], curve='linear', **area_style),
    g.spline(x=x, y=y, y0=y0, curve='monotone-x', **area_style),
    g.spline(x=x, y=y, y0=y0, curve='monotone-y', **area_style),
    g.spline(x=x, y=y, y0=y0, curve='natural', **area_style),
    g.spline(x=x, y=y, y0=y0, curve='step', **area_style),
    g.spline(x=x, y=y, y0=y0, curve='step-after', **area_style),
    g.spline(x=x, y=y, y0=y0, curve='step-before', **area_style),
]

page = site['/demo']
row, col = 1, 1
for spline in splines:
    page[f'spline_{col}_{row}'] = ui.graphics_card(
        box=f'{col} {row} 3 1', view_box='0 0 1000 150', width='100%', height='100%',
        stage=g.stage(
            text=g.text(text=spline.curve or '', y=40, font_size=40),
            spline=spline,
        ),
    )
    col += 3
    if col &gt; 11:
        row, col = row + 1, 1

page.save()
</code></pre>
<h2 id="graphics-clock">Graphics / Clock</h2>
<p>Use the graphics API to make a clock.
Source: <a href="https://codepen.io/dudleystorey/pen/HLBki">https://codepen.io/dudleystorey/pen/HLBki</a></p>
<pre><code class="py">import time
import datetime
from h2o_q import site, ui, graphics as g

page = site['/demo']
page['example'] = ui.graphics_card(
    box='1 1 2 3', view_box='0 0 100 100', width='100%', height='100%',
    stage=g.stage(
        face=g.circle(cx='50', cy='50', r='45', fill='#111', stroke_width='2px', stroke='#f55'),
    ),
    scene=g.scene(
        hour=g.rect(x='47.5', y='12.5', width='5', height='40', rx='2.5', fill='#333', stroke='#555'),
        min=g.rect(x='48.5', y='12.5', width='3', height='40', rx='2', fill='#333', stroke='#555'),
        sec=g.line(x1='50', y1='50', x2='50', y2='16', stroke='#f55', stroke_width='1px'),
    ),
)

page.save()


def rotate(deg): return f'rotate({deg} 50 50)'


scene = page['example'].scene
while True:
    time.sleep(1)
    now = datetime.datetime.now()
    g.draw(scene.hour, transform=rotate(30 * (now.hour % 12) + now.minute / 2))
    g.draw(scene.min, transform=rotate(6 * now.minute))
    g.draw(scene.sec, transform=rotate(6 * now.second))
    page.save()
</code></pre>
<h2 id="graphics-path">Graphics / Path</h2>
<p>Use the graphics API to draw a red square.</p>
<pre><code class="py">from h2o_q import site, ui, graphics as g

# Use relative coords to draw a square, sort of like Python's turtle package.
red_square = g.p().m(25, 25).h(50).v(50).h(-50).z().path(fill='red')

page = site['/demo']
page['example'] = ui.graphics_card(
    box='1 1 2 3', view_box='0 0 100 100', width='100%', height='100%',
    scene=g.scene(foo=red_square),
)

page.save()
</code></pre>
<h2 id="graphics-turtle">Graphics / Turtle</h2>
<p>Use turtle graphics to draw paths.
Original example: <a href="https://docs.python.org/3/library/turtle.html">https://docs.python.org/3/library/turtle.html</a></p>
<pre><code class="py">from h2o_q import site, ui, graphics as g

t = g.turtle().f(100).r(90).pd()
for _ in range(36):
    t.f(200).l(170)
spirograph = t.pu(1).path(stroke='red', fill='yellow')

page = site['/demo']
page['example'] = ui.graphics_card(
    box='1 1 2 3', view_box='0 0 220 220', width='100%', height='100%',
    scene=g.scene(foo=spirograph),
)

page.save()
</code></pre>
<h2 id="graphics-hilbert">Graphics / Hilbert</h2>
<p>Use turtle graphics recursively to draw Hilbert curves.</p>
<pre><code class="py">from h2o_q import ui, listen, Q, graphics as g


def hilbert(t: g.Turtle, width: float, depth: int, reverse=False):  # recursive
    angle = -90 if reverse else 90

    if depth == 0:
        t.f(width).r(angle).f(width).r(angle).f(width)
        return

    side = width * ((2 ** depth) - 1) / float((2 ** (depth + 1)) - 1)
    edge = width - 2 * side

    t.r(angle)
    hilbert(t, side, depth - 1, not reverse)
    t.r(angle).f(edge)
    hilbert(t, side, depth - 1, reverse)
    t.l(angle).f(edge).l(angle)
    hilbert(t, side, depth - 1, reverse)
    t.f(edge).r(angle)
    hilbert(t, side, depth - 1, not reverse)
    t.r(angle)


def make_hilbert_curve(width: float, depth: int):
    t = g.turtle().f(0).pd()
    hilbert(t, width, depth)
    return t.d()


async def main(q: Q):
    hilbert_curve = make_hilbert_curve(300, q.args.depth or 5)

    if not q.client.initialized:
        q.page['curve'] = ui.graphics_card(
            box='1 1 4 6', view_box='0 0 300 300', width='100%', height='100%',
            scene=g.scene(
                hilbert_curve=g.path(d=hilbert_curve, fill='none', stroke='#333')
            ),
        )
        q.page['form'] = ui.form_card(
            box='1 7 4 1', items=[
                ui.slider(name='depth', label='Play with this Hilbert curve!', min=1, max=6, value=5, trigger=True),
            ],
        )
        q.client.initialized = True
    else:
        g.draw(q.page['curve'].scene.hilbert_curve, d=hilbert_curve)

    await q.page.save()


listen('/demo', main)
</code></pre>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">&#34;&#34;&#34;
Python package `h2o_q` provides the Python driver for H2O Q.

H2O Q is a lightweight software stack for programming interactive web applications
entirely in Python (no HTML/Javascript/CSS) required.

It is designed to make it fast, fun and easy to build low-latency, realtime,
collaborative, web-based applications. It ships batteries-included with
a suite of form and data visualization components for rapidly prototyping
analytical and decision-support applications.

Q&#39;s components work in conjunction with the Q relay server that facilitates
realtime state synchronization between Python and web browsers.


.. include:: ../docs/index.md
&#34;&#34;&#34;
from .core import Site, site, Page, Ref, data, pack, configure, Expando, expando_to_dict, clone_expando, copy_expando
from .server import listen, Q
from .db import TeleDBError, TeleDB
from .types import *
from .test import cypress, Cypress</code></pre>
</details>
</section>
<section>
<h2 class="section-title" id="header-submodules">Sub-modules</h2>
<dl>
<dt><code class="name"><a title="h2o_q.autoreload" href="autoreload.html">h2o_q.autoreload</a></code></dt>
<dd>
<div class="desc"><p>Automatically restart the server when a source file is modified.</p></div>
</dd>
<dt><code class="name"><a title="h2o_q.core" href="core.html">h2o_q.core</a></code></dt>
<dd>
<div class="desc"></div>
</dd>
<dt><code class="name"><a title="h2o_q.db" href="db.html">h2o_q.db</a></code></dt>
<dd>
<div class="desc"></div>
</dd>
<dt><code class="name"><a title="h2o_q.graphics" href="graphics.html">h2o_q.graphics</a></code></dt>
<dd>
<div class="desc"></div>
</dd>
<dt><code class="name"><a title="h2o_q.server" href="server.html">h2o_q.server</a></code></dt>
<dd>
<div class="desc"></div>
</dd>
<dt><code class="name"><a title="h2o_q.test" href="test.html">h2o_q.test</a></code></dt>
<dd>
<div class="desc"></div>
</dd>
<dt><code class="name"><a title="h2o_q.types" href="types.html">h2o_q.types</a></code></dt>
<dd>
<div class="desc"></div>
</dd>
<dt><code class="name"><a title="h2o_q.ui" href="ui.html">h2o_q.ui</a></code></dt>
<dd>
<div class="desc"></div>
</dd>
</dl>
</section>
<section>
</section>
<section>
</section>
<section>
</section>
</article>
<nav id="sidebar">
<img class='logo' src='https://h2oai.github.io/qd/q.png'/>
<h1>Index</h1>
<div class="toc">
<ul>
<li><a href="#change-log">Change Log</a></li>
<li><a href="#migration-guide">Migration Guide</a><ul>
<li><a href="#what-has-changed">What has changed?</a></li>
<li><a href="#breaking-changes">Breaking changes</a></li>
</ul>
</li>
<li><a href="#authoring-functional-tests">Authoring functional tests</a><ul>
<li><a href="#prerequisites">Prerequisites</a><ul>
<li><a href="#step-1-install-nodejs">Step 1: Install Node.js</a></li>
<li><a href="#step-2-set-up-cypress">Step 2: Set up Cypress</a></li>
</ul>
</li>
<li><a href="#writing-a-test">Writing a test</a></li>
<li><a href="#running-your-test">Running your test</a><ul>
<li><a href="#step-1-start-the-cypress-test-runner">Step 1: Start the Cypress test runner</a></li>
<li><a href="#step-2-start-the-q-server-as-usual">Step 2: Start the Q server as usual</a></li>
<li><a href="#step-3-translate-your-python-tests-to-javascript">Step 3: Translate your Python tests to Javascript</a></li>
<li><a href="#step-4-run-your-tests">Step 4: Run your tests</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#examples">Examples</a><ul>
<li><a href="#hello-world">Hello World!</a></li>
<li><a href="#to-do-list-app">To-do List App</a></li>
<li><a href="#breadcrumbs">Breadcrumbs</a></li>
<li><a href="#wizard">Wizard</a></li>
<li><a href="#stepper">Stepper</a></li>
<li><a href="#stat-small">Stat / Small</a></li>
<li><a href="#stat-large">Stat / Large</a></li>
<li><a href="#stat-gauge-wide">Stat / Gauge / Wide</a></li>
<li><a href="#stat-gauge-tall">Stat / Gauge / Tall</a></li>
<li><a href="#stat-bar-wide">Stat / Bar / Wide</a></li>
<li><a href="#stat-bar-large">Stat / Bar / Large</a></li>
<li><a href="#stat-series-small-area">Stat / Series / Small / Area</a></li>
<li><a href="#stat-series-small-interval">Stat / Series / Small / Interval</a></li>
<li><a href="#stat-series-wide-area">Stat / Series / Wide / Area</a></li>
<li><a href="#stat-series-wide-interval">Stat / Series / Wide / Interval</a></li>
<li><a href="#stat-series-tall-area">Stat / Series / Tall / Area</a></li>
<li><a href="#stat-series-tall-interval">Stat / Series / Tall / Interval</a></li>
<li><a href="#dashboard">Dashboard</a></li>
<li><a href="#layout-position">Layout / Position</a></li>
<li><a href="#layout-size">Layout / Size</a></li>
<li><a href="#form-text">Form / Text</a></li>
<li><a href="#form-text-sizes">Form / Text / Sizes</a></li>
<li><a href="#form-label">Form / Label</a></li>
<li><a href="#form-link">Form / Link</a></li>
<li><a href="#form-progress">Form / Progress</a></li>
<li><a href="#form-progress-updating">Form / Progress / Updating</a></li>
<li><a href="#form-message-bar">Form / Message Bar</a></li>
<li><a href="#form-textbox">Form / Textbox</a></li>
<li><a href="#form-textbox-trigger">Form / Textbox / trigger</a></li>
<li><a href="#form-button">Form / Button</a></li>
<li><a href="#form-buttons">Form / Buttons</a></li>
<li><a href="#form-checkbox">Form / Checkbox</a></li>
<li><a href="#form-checklist">Form / Checklist</a></li>
<li><a href="#form-picker">Form / Picker</a></li>
<li><a href="#form-picker-selection">Form / Picker / Selection</a></li>
<li><a href="#form-dropdown">Form / Dropdown</a></li>
<li><a href="#form-choice-group">Form / Choice Group</a></li>
<li><a href="#form-combobox">Form / Combobox</a></li>
<li><a href="#form-toggle">Form / Toggle</a></li>
<li><a href="#form-spinbox">Form / Spinbox</a></li>
<li><a href="#form-slider">Form / Slider</a></li>
<li><a href="#form-range-slider">Form / Range Slider</a></li>
<li><a href="#form-date-picker">Form / Date Picker</a></li>
<li><a href="#form-color-picker">Form / Color Picker</a></li>
<li><a href="#form-swatch-picker">Form / Swatch Picker</a></li>
<li><a href="#form-tabs">Form / Tabs</a></li>
<li><a href="#form-separator">Form / Separator</a></li>
<li><a href="#form-file-upload">Form / File Upload</a></li>
<li><a href="#image">Image</a></li>
<li><a href="#form-frame">Form / Frame</a></li>
<li><a href="#form-frame-path">Form / Frame / Path</a></li>
<li><a href="#frame">Frame</a></li>
<li><a href="#frame-path">Frame / Path</a></li>
<li><a href="#lists">Lists</a></li>
<li><a href="#grid">Grid</a></li>
<li><a href="#flex">Flex</a></li>
<li><a href="#repeat">Repeat</a></li>
<li><a href="#template">Template</a></li>
<li><a href="#template-data">Template / Data</a></li>
<li><a href="#markdown">Markdown</a></li>
<li><a href="#markdown-data">Markdown / Data</a></li>
<li><a href="#markup">Markup</a></li>
<li><a href="#table">Table</a></li>
<li><a href="#nav">Nav</a></li>
<li><a href="#toolbar">Toolbar</a></li>
<li><a href="#tab">Tab</a></li>
<li><a href="#tab-links">Tab / Links</a></li>
<li><a href="#header">Header</a></li>
<li><a href="#routing">Routing</a></li>
<li><a href="#routing-toolbar">Routing / Toolbar</a></li>
<li><a href="#routing-tabs">Routing / Tabs</a></li>
<li><a href="#context-menu">Context Menu</a></li>
<li><a href="#plot-point">Plot / Point</a></li>
<li><a href="#plot-point-shapes">Plot / Point / Shapes</a></li>
<li><a href="#plot-point-sizes">Plot / Point / Sizes</a></li>
<li><a href="#plot-point-map">Plot / Point / Map</a></li>
<li><a href="#plot-point-groups">Plot / Point / Groups</a></li>
<li><a href="#plot-point-annotation">Plot / Point / Annotation</a></li>
<li><a href="#plot-point-custom">Plot / Point / Custom</a></li>
<li><a href="#plot-interval">Plot / Interval</a></li>
<li><a href="#plot-interval-transpose">Plot / Interval / Transpose</a></li>
<li><a href="#plot-interval-groups">Plot / Interval / Groups</a></li>
<li><a href="#plot-interval-groups-transpose">Plot / Interval / Groups / Transpose</a></li>
<li><a href="#plot-interval-labels">Plot / Interval / Labels</a></li>
<li><a href="#plot-interval-range">Plot / Interval / Range</a></li>
<li><a href="#plot-interval-range-transpose">Plot / Interval / Range / Transpose</a></li>
<li><a href="#plot-interval-stacked">Plot / Interval / Stacked</a></li>
<li><a href="#plot-interval-stacked-transpose">Plot / Interval / Stacked / Transpose</a></li>
<li><a href="#plot-interval-stacked-grouped">Plot / Interval / Stacked / Grouped</a></li>
<li><a href="#plot-interval-stacked-grouped-transpose">Plot / Interval / Stacked / Grouped / Transpose</a></li>
<li><a href="#plot-interval-polar">Plot / Interval / Polar</a></li>
<li><a href="#plot-interval-polar-stacked">Plot / Interval / Polar / Stacked</a></li>
<li><a href="#plot-interval-theta">Plot / Interval / Theta</a></li>
<li><a href="#plot-interval-helix">Plot / Interval / Helix</a></li>
<li><a href="#plot-interval-annotation">Plot / Interval / Annotation</a></li>
<li><a href="#plot-interval-annotation-transpose">Plot / Interval / Annotation / Transpose</a></li>
<li><a href="#plot-line">Plot / Line</a></li>
<li><a href="#plot-line-groups">Plot / Line / Groups</a></li>
<li><a href="#plot-line-smooth">Plot / Line / Smooth</a></li>
<li><a href="#plot-line-step">Plot / Line / Step</a></li>
<li><a href="#plot-line-step-after">Plot / Line / Step / After</a></li>
<li><a href="#plot-line-step-before">Plot / Line / Step / Before</a></li>
<li><a href="#plot-line-labels">Plot / Line / Labels</a></li>
<li><a href="#plot-line-labels-stroked">Plot / Line / Labels/ Stroked</a></li>
<li><a href="#plot-line-labels-occlusion">Plot / Line / Labels / Occlusion</a></li>
<li><a href="#plot-line-annotation">Plot / Line / Annotation</a></li>
<li><a href="#plot-path">Plot / Path</a></li>
<li><a href="#plot-path-point">Plot / Path / Point</a></li>
<li><a href="#plot-path-smooth">Plot / Path / Smooth</a></li>
<li><a href="#plot-area">Plot / Area</a></li>
<li><a href="#plot-area-groups">Plot / Area / Groups</a></li>
<li><a href="#plot-area-negative">Plot / Area / Negative</a></li>
<li><a href="#plot-area-range">Plot / Area / Range</a></li>
<li><a href="#plot-area-smooth">Plot / Area / Smooth</a></li>
<li><a href="#plot-area-stacked">Plot / Area / Stacked</a></li>
<li><a href="#plot-area-line">Plot / Area + Line</a></li>
<li><a href="#plot-area-line-smooth">Plot / Area + Line / Smooth</a></li>
<li><a href="#plot-area-line-groups">Plot / Area + Line / Groups</a></li>
<li><a href="#plot-polygon">Plot / Polygon</a></li>
<li><a href="#plot-histogram">Plot / Histogram</a></li>
<li><a href="#plot-axis-titles">Plot / Axis Titles</a></li>
<li><a href="#plot-form">Plot / Form</a></li>
<li><a href="#plot-vega-lite">Plot / Vega-lite</a></li>
<li><a href="#plot-vega-lite-update">Plot / Vega-lite / Update</a></li>
<li><a href="#plot-vega-lite-form">Plot / Vega-lite / Form</a></li>
<li><a href="#plot-altair">Plot / Altair</a></li>
<li><a href="#plot-bokeh">Plot / Bokeh</a></li>
<li><a href="#plot-matplotlib">Plot / Matplotlib</a></li>
<li><a href="#plot-plotly">Plot / Plotly</a></li>
<li><a href="#plot-d3js">Plot / D3.js</a></li>
<li><a href="#pixel-art">Pixel Art</a></li>
<li><a href="#uploads">Uploads</a></li>
<li><a href="#uploads-async">Uploads / Async</a></li>
<li><a href="#uploads-ui">Uploads / UI</a></li>
<li><a href="#uploads-ui_1">Uploads / UI</a></li>
<li><a href="#meta-title">Meta / Title</a></li>
<li><a href="#meta-notification">Meta / Notification</a></li>
<li><a href="#meta-refresh">Meta / Refresh</a></li>
<li><a href="#mode-broadcast-global">Mode / Broadcast / Global</a></li>
<li><a href="#mode-broadcast">Mode / Broadcast</a></li>
<li><a href="#mode-multicast">Mode / Multicast</a></li>
<li><a href="#mode-unicast">Mode / Unicast</a></li>
<li><a href="#graphics-primitives">Graphics / Primitives</a></li>
<li><a href="#graphics-spline">Graphics / Spline</a></li>
<li><a href="#graphics-clock">Graphics / Clock</a></li>
<li><a href="#graphics-path">Graphics / Path</a></li>
<li><a href="#graphics-turtle">Graphics / Turtle</a></li>
<li><a href="#graphics-hilbert">Graphics / Hilbert</a></li>
</ul>
</li>
</ul>
</div>
<ul id="index">
<li><h3><a href="#header-submodules">Sub-modules</a></h3>
<ul>
<li><code><a title="h2o_q.autoreload" href="autoreload.html">h2o_q.autoreload</a></code></li>
<li><code><a title="h2o_q.core" href="core.html">h2o_q.core</a></code></li>
<li><code><a title="h2o_q.db" href="db.html">h2o_q.db</a></code></li>
<li><code><a title="h2o_q.graphics" href="graphics.html">h2o_q.graphics</a></code></li>
<li><code><a title="h2o_q.server" href="server.html">h2o_q.server</a></code></li>
<li><code><a title="h2o_q.test" href="test.html">h2o_q.test</a></code></li>
<li><code><a title="h2o_q.types" href="types.html">h2o_q.types</a></code></li>
<li><code><a title="h2o_q.ui" href="ui.html">h2o_q.ui</a></code></li>
</ul>
</li>
</ul>
</nav>
</main>
<footer id="footer">
<p>Generated by <a href="https://pdoc3.github.io/pdoc"><cite>pdoc</cite> 0.8.4</a>.</p>
</footer>
</body>
</html>